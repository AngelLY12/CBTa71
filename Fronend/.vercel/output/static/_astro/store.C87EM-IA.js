let l=[],i=0;const c=4;let a=o=>{let f=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=f.push(t),()=>{for(let s=i+c;s<l.length;)l[s]===t?l.splice(s,c):s+=c;let n=f.indexOf(t);~n&&(f.splice(n,1),--e.lc)}},notify(t,n){let s=!l.length;for(let u of f)l.push(u,e.value,t,n);if(s){for(i=0;i<l.length;i+=c)l[i](l[i+1],l[i+2],l[i+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:o};return e},r=[];if(typeof window<"u"){const o=localStorage.getItem("concepts");o&&(r=JSON.parse(o))}const p=a(r);typeof window<"u"&&p.subscribe(o=>{localStorage.setItem("concepts",JSON.stringify(o))});export{p as c};
