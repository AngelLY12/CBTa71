{
    "openapi": "3.0.0",
    "info": {
        "title": "School Management API",
        "description": "Documentación de la API para el sistema de gestión escolar",
        "contact": {
            "name": "Equipo de desarrollo CBTa71",
            "email": "soporte@cbta71.edu.mx"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:80",
            "description": "Servidor local"
        },
        {
            "url": "https://nginx-production-728f.up.railway.app",
            "description": "Servidor de producción"
        }
    ],
    "paths": {
        "/api": {},
        "/api/v1/admin-actions/update-permissions/{userId}": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Actualizar permisos a un usuario",
                "description": "Permite al administrador agregar o eliminar permisos a un usuario.",
                "operationId": "updateSingleUserPermissions",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint ",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint ",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "sync.permissions"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "ID del usuario a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 2
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para actualizar permisos de usuario.",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePermissionsToUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Respuesta de usuarios actualizados.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "updated": {
                                                            "description": "Usuarios con permisos actualizados",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PermissionsUpdatedToUserResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Permisos actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los datos enviados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado: el usuario autenticado no tiene permiso para ejecutar esta acción",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/updated-roles/{userId}": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Sincroniza roles de un usuario",
                "description": "Permite agregar o eliminar roles a un usuario.",
                "operationId": "updateSingleUserRoles",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "sync.roles"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "ID del usuario a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 2
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateRolesToUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Roles actualizados correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "updated": {
                                                            "$ref": "#/components/schemas/RolesUpdatedToUserResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Roles actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/update-permissions": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Actualizar permisos a múltiples usuarios",
                "description": "Permite al administrador agregar o eliminar permisos a varios usuarios al mismo tiempo.\n     *     Se puede especificar una lista de CURP o role (solo uno de los dos) y los permisos que se añadirán o eliminarán.",
                "operationId": "updateManyUserPermissions",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint ",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint ",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "sync.permissions"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para actualizar permisos de usuario.",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePermissionsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Respuesta de usuarios actualizados.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "users_permissions": {
                                                            "description": "Usuarios con permisos actualizados",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/UserWithUpdatedPermissionsResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Permisos actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los datos enviados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado: el usuario autenticado no tiene permiso para ejecutar esta acción",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/updated-roles": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Sincroniza roles de múltiples usuarios",
                "description": "Permite agregar o eliminar roles a varios usuarios simultáneamente.",
                "operationId": "updateManyUserRoles",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "sync.roles"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateRolesRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Roles actualizados correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "users_roles": {
                                                            "$ref": "#/components/schemas/UserWithUpdatedRoleResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Roles actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/permissions/by-curps": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar permisos existentes para usuarios especificos",
                "description": "Permite al administrador ver todos los permisos registrados.",
                "operationId": "showAllPermissionsByCurps",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.permissions"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FindPermissionsByCurpsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Permisos obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "permissions": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PermissionsByUsers"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "roles": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "type": "string"
                                                                            },
                                                                            "example": [
                                                                                "admin",
                                                                                "user",
                                                                                "editor"
                                                                            ]
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "users": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "properties": {
                                                                                    "id": {
                                                                                        "type": "integer",
                                                                                        "example": 1
                                                                                    },
                                                                                    "fullName": {
                                                                                        "type": "string",
                                                                                        "example": "Ana García"
                                                                                    },
                                                                                    "curp": {
                                                                                        "type": "string",
                                                                                        "example": "GAAA900101HDFRRN05"
                                                                                    }
                                                                                },
                                                                                "type": "object"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "permissions": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PermissionToDisplay"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/permissions/by-role": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar permisos existentes por role",
                "description": "Permite al administrador ver todos los permisos registrados por role.",
                "operationId": "showAllPermissionsByRole",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.permissions"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FindPermissionsByCurpsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Permisos obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "permissions": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PermissionsByRole"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "role": {
                                                                            "type": "string",
                                                                            "example": "student"
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "usersCount": {
                                                                            "type": "integer",
                                                                            "example": 130
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "permissions": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PermissionToDisplay"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/permissions/by-user/{userId}": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar permisos existentes para los roles del usuario",
                "description": "Permite al administrador ver todos los permisos registrados para el usuario.",
                "operationId": "showAllPermissionsByUser",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.permissions"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "ID del usuario a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 2
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/FindPermissionsToUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Permisos obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "permissions": {
                                                            "allOf": [
                                                                {
                                                                    "properties": {
                                                                        "permissions": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PermissionToDisplay"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/find-roles": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar roles existentes",
                "description": "Permite al administrador ver todos los roles registrados.",
                "operationId": "showAllRoles",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.roles"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Roles obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "roles": {
                                                            "description": "Lista de roles disponibles.",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Role"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/roles/{id}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar rol por ID",
                "description": "Permite al administrador ver la información de un rol específico por su identificador.",
                "operationId": "showRoleById",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.roles"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del rol a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 2
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rol obtenido correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "role": {
                                                            "$ref": "#/components/schemas/Role"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Rol no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/permissions/{id}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar permiso por ID",
                "description": "Permite al administrador ver la información de un permiso específico por su identificador.",
                "operationId": "showPermissionById",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.permissions"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del permiso a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Permiso obtenido correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "permission": {
                                                            "$ref": "#/components/schemas/Permission"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Permiso no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/promote": {
            "patch": {
                "tags": [
                    "Admin"
                ],
                "summary": "Incrementa el semestre de los alumnos y da de baja a quienes sobrepasan",
                "description": "Se hace un incremento en el semestre de todos los alumnos sin importar status y da de baja a quienes sobrepasan el semestre 12.",
                "operationId": "promotionStudents",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "promote.student"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuarios promovidos con exito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "affected": {
                                                            "properties": {
                                                                "usuarios_promovidos": {
                                                                    "type": "integer",
                                                                    "example": 27
                                                                },
                                                                "usuarios_baja": {
                                                                    "type": "integer",
                                                                    "example": 5
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Se ejecutó la promoción de usuarios correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado en el servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/attach-student": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Asociar detalles de estudiante a un usuario existente",
                "description": "Permite asignar información académica (carrera, semestre, grupo, taller) a un usuario ya registrado.",
                "operationId": "attachStudentDetailToUser",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "attach.student"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para asociar un detalle de estudiante al usuario.",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AttachStudentRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario asociado correctamente a un detalle de estudiante.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainUser"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Se asociarón correctamente los datos al estudiante."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para realizar esta acción.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario o recurso no encontrado.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/get-student/{id}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Obtener detalles de estudiante a un usuario existente",
                "description": "Permite obtener información académica (carrera, grupo, taller) a un usuario ya registrado.",
                "operationId": "getStudentDetailToUser",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.student"
                        }
                    },
                    {
                        "name": "id",
                        "in": "query",
                        "description": "ID del estudiante del que se quieren los detalles.",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles de estudiante encontrados correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainStudentDetail"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para realizar esta acción.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario o recurso no encontrado.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/update-student/{id}": {
            "patch": {
                "tags": [
                    "Admin"
                ],
                "summary": "Actualizar detalles de estudiante a un usuario existente",
                "description": "Permite actualizar información académica (carrera, grupo, taller) a un usuario ya registrado.",
                "operationId": "updateStudentDetailToUser",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "update.student"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para actualizar un detalle de estudiante al usuario.",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateStudentRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario actualizado correctamente con detalle de estudiante.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainUser"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Se actualizaron correctamente los detalles de estudiante."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para realizar esta acción.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario o recurso no encontrado.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/import-students": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Importar detalles estudiantiles desde un archivo Excel",
                "description": "Permite subir un archivo Excel (.xlsx) con los detalles estudiantiles de los usuarios.\n     *      Solo se insertarán filas con CURP existente en la base de datos y con career_id, n_control y semestre definidos.\n     *      Columnas esperadas:\n     *     0. curp (CURP del usuario)\n     *     1. career_id (ID de la carrera)\n     *     2. n_control (Número de control)\n     *     3. semestre (Semestre)\n     *     4. group (opcional grupo)\n     *     5. workshop (opcional taller)",
                "operationId": "4b3c06b7bcf40fa1b27b5d28ba5a09f9",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "import.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Archivo Excel (.xlsx) con las columnas en el orden especificado",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Importación completada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "summary": {
                                                            "$ref": "#/components/schemas/ImportResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Usuarios importados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en la validación o formato del archivo.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/register": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Registrar un nuevo usuario",
                "description": "Crea un nuevo usuario en el sistema con los datos proporcionados.",
                "operationId": "adminRegisterUser",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "create.user"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para el registro del usuario. Nota: La contraseña no debe ser incluida en la request, se genera para cada usuario desde el sistema",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado con éxito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainUser"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "El usuario ha sido creado con éxito."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado en el servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/import-users": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Importar usuarios desde un archivo Excel",
                "description": "Permite subir un archivo Excel (.xlsx) con los datos de los usuarios y sus detalles estudiantiles.\n     *     El archivo debe contener las columnas en el siguiente orden:\n     *     0. name (Nombre)\n     *     1. last_name (Apellidos)\n     *     2. email (Correo electrónico)\n     *     3. phone_number (Teléfono, formato +52)\n     *     4. birthdate (Fecha de nacimiento, formato YYYY-MM-DD)\n     *     5. gender (Género, hombre/mujer, opcional)\n     *     6. curp (CURP)\n     *     7. street (Calle)\n     *     8. city (Ciudad)\n     *     9. state (Estado)\n     *     10. zip_code (Código postal)\n     *     11. blood_type (Tipo de sangre, A+, B+, O-, etc, opcional)\n     *     12. registration_date (Fecha de registro, si no se especifica se usa la actual, formato YYYY-MM-DD)\n     *     13. status (Estado del usuario, por defecto 'activo')\n     *     14. career_id (ID de la carrera)\n     *     15. n_control (Número de control)\n     *     16. semestre (Semestre)\n     *     17. group (Grupo)\n     *     18. workshop (Taller)\n     *     El género, dirección y tipo de sangre son opcionales, ademas, los detalles de estudiante del 14 a 18 no son obligatorios, si decides ponerlos  los primeros tres son obligatorios, ID de la carrera, número de control y semestre\n     *     ",
                "operationId": "de6fe0fa5c10b5074f678faf0721b6fb",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "import.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Archivo Excel (.xlsx) con las columnas en el orden especificado",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Importación completada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "summary": {
                                                            "$ref": "#/components/schemas/ImportResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Usuarios importados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en la validación o formato del archivo.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/show-users": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar usuarios existentes",
                "description": "Permite al administrador ver a todos los usuarios registrados, junto con sus roles, permisos y detalles académicos (si aplica).",
                "operationId": "showAllUsers",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.users"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de usuarios por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a mostrar",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrar usuarios por estatus",
                        "required": false,
                        "schema": {
                            "$ref": "#/components/schemas/UserStatus"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuarios obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "users": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/UserListItemResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Usuarios encontrados."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/show-users/{id}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar datos extra del usuario existente",
                "description": "Permite al administrador ver datos extra del usuario, junto con sus roles, permisos y detalles académicos (si aplica).",
                "operationId": "showUserDetail",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.users"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "query",
                        "description": "ID del usuario",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuarios obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/UserExtraDataResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Usuario encontrado."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/users-summary": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar resuúmen de usuarios",
                "description": "Permite al administrador ver un resumen de los usuarios del sistema.",
                "operationId": "showUsersSummary",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.users"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Mostrar datos de este año (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuarios obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "summary": {
                                                            "$ref": "#/components/schemas/UsersAdminSummary"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Resumen de usuarios obtenido."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/activate-users": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Activa múltiples usuarios",
                "description": "Cambia el estado de los usuarios seleccionados a 'activado'.",
                "operationId": "407e3ba9fab673c0960b6bdcc22f6afb",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "activate.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChangeUserStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuarios activados correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UserChangedStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Estatus de usuarios actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/delete-users": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Elimina múltiples usuarios",
                "description": "Cambia el estado de los usuarios seleccionados a 'eliminado'.",
                "operationId": "96cee6f0e9b515ff4343a3917f22d162",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "delete.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChangeUserStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuarios eliminados correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UserChangedStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Estatus de usuarios actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/disable-users": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Da de baja múltiples usuarios",
                "description": "Cambia el estado de los usuarios seleccionados a 'baja'.",
                "operationId": "e1f145dd9d120c088b6264f8149118c1",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "disable.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChangeUserStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuarios dados de baja correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UserChangedStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Estatus de usuarios actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/temporary-disable-users": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Da de baja temporal múltiples usuarios",
                "description": "Cambia el estado de los usuarios seleccionados a 'baja-temporal'.",
                "operationId": "6af903833c52069bc48cbb3542bc88be",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "disable.users"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChangeUserStatusRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuarios dados de baja correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UserChangedStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Estatus de usuarios actualizados correctamente."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/email/verification-notification": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Enviar enlace de verificación de correo",
                "description": "Envía un correo con el enlace de verificación si el usuario aún no ha verificado su email.",
                "operationId": "sendEmailVerificationNotification",
                "responses": {
                    "200": {
                        "description": "Enlace de verificación enviado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "verification-link-sent"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "302": {
                        "description": "Redirección al dashboard si el email ya está verificado"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/reset-password": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Actualizar contraseña usando token",
                "description": "Permite que un usuario actualice su contraseña usando el token enviado por correo.",
                "operationId": "resetPassword",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token",
                                    "email",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string",
                                        "example": "token_generado_por_correo"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "usuario@mail.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "nuevaContrasena123"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "nuevaContrasena123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña actualizada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "passwords.reset"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validación fallida o token inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/forgot-password": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Enviar link para restablecer contraseña",
                "description": "Envía un correo con el enlace de restablecimiento de contraseña al email proporcionado.",
                "operationId": "sendPasswordResetLink",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "usuario@mail.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Enlace de restablecimiento enviado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "status": {
                                                            "type": "string",
                                                            "example": "passwords.sent"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Email no válido o usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/verify-email/{id}/{hash}": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Verificar email del usuario",
                "description": "Marca el correo del usuario como verificado si el hash es correcto.",
                "operationId": "verifyEmail",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "hash",
                        "in": "path",
                        "description": "Hash de verificación enviado por correo",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "hash_generado_por_laravel"
                        }
                    }
                ],
                "responses": {
                    "302": {
                        "description": "Redirige al frontend con ?verified=1"
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Registrar un nuevo usuario",
                "description": "Crea un nuevo usuario en el sistema con los datos proporcionados.",
                "operationId": "registerUser",
                "requestBody": {
                    "description": "Datos necesarios para el registro del usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado con éxito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainUser"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "El usuario ha sido creado con éxito."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado en el servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Inicio de sesión de usuario",
                "description": "Autentica un usuario con su correo electrónico y contraseña, devolviendo el access token y refresh token.",
                "operationId": "loginUser",
                "requestBody": {
                    "description": "Credenciales del usuario para iniciar sesión",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user_tokens": {
                                                            "$ref": "#/components/schemas/LoginResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Inicio de sesión exitoso."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/refresh-token": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Refrescar token de acceso",
                "description": "Recibe un token de actualización (refresh token) y devuelve un nuevo token de acceso válido. Tambien rota el refresh token",
                "operationId": "87d6208a28ed0ebd10872a51f29688f3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "refresh_token"
                                ],
                                "properties": {
                                    "refresh_token": {
                                        "type": "string",
                                        "example": "def50200fcdcb15b13e..."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tokens renovados con exito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user_tokens": {
                                                            "$ref": "#/components/schemas/LoginResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Tokens renovados."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Cerrar sesión",
                "description": "Cierra la sesión del usuario y revoca el refresh token proporcionado.",
                "operationId": "814f24978e529a8a742de48a6d076bfa",
                "parameters": [
                    {
                        "name": "x-refresh-token",
                        "in": "header",
                        "description": "Refresh token asociado a la sesión",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "def50200fcdcb15b13e..."
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Sesión cerrada exitosamente (sin contenido)"
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/careers": {
            "get": {
                "tags": [
                    "Careers"
                ],
                "summary": "Obtener todas las carreras",
                "operationId": "bb1fa9e5056d26b02f98a3ba4c910c16",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor|financial-staff"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de carreras",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "careers": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/DomainCareer"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carreras encontradas."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Careers"
                ],
                "summary": "Crear una nueva carrera",
                "operationId": "d746bcd94f877f432f05969e43d7d131",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCareerRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Carrera creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "career": {
                                                            "$ref": "#/components/schemas/DomainCareer"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carrera creada."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Solicitud incorrecta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validación fallida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/careers/{id}": {
            "get": {
                "tags": [
                    "Careers"
                ],
                "summary": "Obtener una carrera por ID",
                "operationId": "8c304f74e4e0f60ddc4a8a1937b63198",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor|financial-staff"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la carrera",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Carrera encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "career": {
                                                            "$ref": "#/components/schemas/DomainCareer"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carrera encontrada."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Careers"
                ],
                "summary": "Actualizar una carrera existente",
                "operationId": "41a218660173290da4266c24ee806f9d",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la carrera",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateCareerRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Carrera actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "updated": {
                                                            "$ref": "#/components/schemas/DomainCareer"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carrera actualizada."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Solicitud incorrecta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validación fallida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1//careers/{id}": {
            "delete": {
                "tags": [
                    "Careers"
                ],
                "summary": "Eliminar una carrera",
                "operationId": "9b65eedba251468e82954c48c1087d74",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "admin|supervisor"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la carrera a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Carrera eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Carrera eliminada con éxito."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/notifications": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Obtener notificaciones leídas paginadas del usuario autenticado",
                "description": "Retorna una lista paginada de las notificaciones LEÍDAS del usuario. Las notificaciones no leídas se obtienen en el endpoint /unread.",
                "operationId": "getUserNotifications",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Notificaciones por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificaciones leídas obtenidas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "notifications": {
                                                            "properties": {
                                                                "data": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "properties": {
                                                                            "id": {
                                                                                "type": "string",
                                                                                "format": "uuid",
                                                                                "example": "550e8400-e29b-41d4-a716-446655440000"
                                                                            },
                                                                            "type": {
                                                                                "type": "string",
                                                                                "example": "App\\\\Notifications\\\\PaymentConceptUpdated"
                                                                            },
                                                                            "notifiable_type": {
                                                                                "type": "string",
                                                                                "example": "App\\\\Models\\\\User"
                                                                            },
                                                                            "notifiable_id": {
                                                                                "type": "integer",
                                                                                "example": 1
                                                                            },
                                                                            "data": {
                                                                                "properties": {
                                                                                    "title": {
                                                                                        "type": "string",
                                                                                        "example": "Actualización del concepto de pago"
                                                                                    },
                                                                                    "message": {
                                                                                        "type": "string",
                                                                                        "example": "El concepto 'Matrícula' (1500.00 MXN) ha sido actualizado"
                                                                                    },
                                                                                    "concept_id": {
                                                                                        "type": "integer",
                                                                                        "example": 1
                                                                                    },
                                                                                    "concept_name": {
                                                                                        "type": "string",
                                                                                        "example": "Matrícula"
                                                                                    },
                                                                                    "amount": {
                                                                                        "type": "number",
                                                                                        "format": "float",
                                                                                        "example": 1500
                                                                                    },
                                                                                    "type": {
                                                                                        "type": "string",
                                                                                        "example": "payment_concept_changed"
                                                                                    },
                                                                                    "created_at": {
                                                                                        "type": "string",
                                                                                        "format": "date-time"
                                                                                    }
                                                                                },
                                                                                "type": "object"
                                                                            },
                                                                            "read_at": {
                                                                                "type": "string",
                                                                                "format": "date-time",
                                                                                "example": "2024-01-15T10:30:00.000000Z"
                                                                            },
                                                                            "created_at": {
                                                                                "type": "string",
                                                                                "format": "date-time"
                                                                            },
                                                                            "updated_at": {
                                                                                "type": "string",
                                                                                "format": "date-time"
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    }
                                                                },
                                                                "current_page": {
                                                                    "type": "integer"
                                                                },
                                                                "last_page": {
                                                                    "type": "integer"
                                                                },
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "total": {
                                                                    "type": "integer"
                                                                },
                                                                "links": {
                                                                    "type": "object"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "unread_count": {
                                                            "type": "integer",
                                                            "example": 5
                                                        },
                                                        "read_count": {
                                                            "type": "integer",
                                                            "example": 15
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/unread": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Obtener notificaciones no leídas",
                "description": "Retorna todas las notificaciones no leídas del usuario",
                "operationId": "getUnreadNotifications",
                "responses": {
                    "200": {
                        "description": "Notificaciones no leídas obtenidas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "notifications": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid",
                                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                                    },
                                                                    "type": {
                                                                        "type": "string",
                                                                        "example": "App\\\\Notifications\\\\PaymentConceptUpdated"
                                                                    },
                                                                    "notifiable_type": {
                                                                        "type": "string",
                                                                        "example": "App\\\\Models\\\\User"
                                                                    },
                                                                    "notifiable_id": {
                                                                        "type": "integer",
                                                                        "example": 1
                                                                    },
                                                                    "data": {
                                                                        "type": "object"
                                                                    },
                                                                    "read_at": {
                                                                        "type": "string",
                                                                        "format": "date-time",
                                                                        "nullable": true
                                                                    },
                                                                    "created_at": {
                                                                        "type": "string",
                                                                        "format": "date-time"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "count": {
                                                            "type": "integer",
                                                            "example": 3
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/mark-as-read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marcar todas las notificaciones como leídas",
                "description": "Marca todas las notificaciones no leídas del usuario como leídas",
                "operationId": "markAllAsRead",
                "responses": {
                    "200": {
                        "description": "Todas las notificaciones marcadas como leídas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "unread_count": {
                                                            "type": "integer",
                                                            "example": 0
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/mark-as-read/{id}": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Marcar una notificación específica como leída",
                "description": "Marca una notificación específica como leída por su ID",
                "operationId": "markNotificationAsRead",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "UUID de la notificación",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación marcada como leída",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "unread_count": {
                                                            "type": "integer",
                                                            "example": 4
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notificación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Notificación no encontrada"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/{id}": {
            "delete": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Eliminar una notificación",
                "description": "Elimina una notificación específica del usuario",
                "operationId": "deleteNotification",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "UUID de la notificación a eliminar",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notificación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ErrorResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Notificación no encontrada"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/parents/invite": {
            "post": {
                "tags": [
                    "Parents"
                ],
                "summary": "Enviar invitación a un padre",
                "operationId": "inviteParent",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SendInviteRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Invitación enviada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "token": {
                                                            "type": "string",
                                                            "example": "uuid-token"
                                                        },
                                                        "expires_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-27T12:34:56Z"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/parents/invite/accept": {
            "post": {
                "tags": [
                    "Parents"
                ],
                "summary": "Aceptar invitación de un padre",
                "operationId": "acceptInvitation",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "parent"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AcceptInviteRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invitación aceptada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/parents/get-children": {
            "get": {
                "tags": [
                    "Parents"
                ],
                "summary": "Obtiene los hijos del parent",
                "operationId": "getParentChildren",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "parent"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Hijos obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "children": {
                                                            "description": "Lista de hijos del usuario",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/ParentChildrenResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/parents/get-parents": {
            "get": {
                "tags": [
                    "Parents"
                ],
                "summary": "Obtiene los familiares del hijo",
                "operationId": "getStudentParents",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Familiares obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "children": {
                                                            "description": "Lista de hijos del usuario",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/StudentParentsResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/parents/delete-parent/{parentId}": {
            "delete": {
                "tags": [
                    "Parents"
                ],
                "summary": "Eliminar una relación del estudiante con un familiar",
                "operationId": "deleteRelation",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student"
                        }
                    },
                    {
                        "name": "parentId",
                        "in": "path",
                        "description": "ID del familiar a eliminar (por ejemplo, 4)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 4
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Relación eliminada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Relación eliminada correctamente"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/update": {
            "patch": {
                "tags": [
                    "Users"
                ],
                "summary": "Actualizar los datos generales de un usuario",
                "operationId": "93598439a2e83120f34943aeccfad2a1",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario actualizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/DomainUser"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Errores de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en la solicitud",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/update/password": {
            "patch": {
                "tags": [
                    "Users"
                ],
                "summary": "Actualizar la contraseña de un usuario",
                "operationId": "274073951d44a000963cd0ac0f1f6359",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePasswordRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contraseña actualizada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Errores de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Contraseña actual incorrecta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/user": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Obtener usuario autenticado",
                "description": "Devuelve la información del usuario autenticado en el sistema.",
                "operationId": "0d2ad3086113a7a70ad30d9fbab89766",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario autenticado encontrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "user": {
                                                            "$ref": "#/components/schemas/UserAuthResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/users/student-details": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Obtener detalles de estudiante del usuario autenticado",
                "description": "Devuelve la información del estudiante autenticado en el sistema.",
                "operationId": "e1e7d4038b610ddf1ced5c1439c8ec06",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario autenticado encontrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "student_details": {
                                                            "$ref": "#/components/schemas/StudentDetailDTO"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/refresh": {
            "post": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Limpiar el caché del dashboard",
                "description": "Forza el borrado del caché en todos los datos del dashboard.",
                "operationId": "5b10b6e78311d2e517417978773db55e",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "refresh.all.dashboard"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Caché limpiado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Dashboard cache limpiado con éxito"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/concepts": {
            "get": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Obtener todos los conceptos de pago",
                "description": "Devuelve una lista paginada de conceptos de pago visibles en el panel del personal. Permite filtrar por año actual y forzar actualización del caché.",
                "operationId": "04f50b1d7dc38d260acfe4f8a0b21012",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.concepts.summary"
                        }
                    },
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Si es true, filtra los conceptos al año actual",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a obtener",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de conceptos obtenida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concepts": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/ConceptsToDashboardResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/payments": {
            "get": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Obtener monto total de pagos realizados",
                "operationId": "d91da0e590d101ad5b11f898359072ae",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.all.paid.concepts.summary"
                        }
                    },
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Monto total de pagos realizados obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments_data": {
                                                            "$ref": "#/components/schemas/FinancialSummaryResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/students": {
            "get": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Obtener el número total de estudiantes",
                "operationId": "faf2e92a1716abb5df5fbf3180d1ba0b",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.all.students.summary"
                        }
                    },
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Número total de estudiantes obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments_data": {
                                                            "$ref": "#/components/schemas/UsersFinancialSummary"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/pending": {
            "get": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Obtener cantidad y monto total de pagos pendientes",
                "description": "Devuelve el total de conceptos pendientes de pago, incluyendo cantidad y monto total. Se puede filtrar por el año actual y forzar la actualización del caché.",
                "operationId": "d557e791308aad2cbdbd1e9a3bd83eca",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.all.pending.concepts.summary"
                        }
                    },
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Totales de pagos pendientes obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "total_pending": {
                                                            "$ref": "#/components/schemas/PendingSummaryResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/payout": {
            "post": {
                "tags": [
                    "Dashboard Staff"
                ],
                "summary": "Crear un payout con todo el balance disponible",
                "description": "Crea un payout en Stripe transfiriendo TODO el balance disponible en MXN a la cuenta bancaria registrada. Requiere un mínimo de $100.00 MXN disponibles.",
                "operationId": "d96c9fdba21a382952eab649eb6e61b9",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "create.payout"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Payout creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payout": {
                                                            "$ref": "#/components/schemas/StripePayoutResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Solicitud incorrecta",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validación fallida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Error de Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts/stripe-payments": {
            "get": {
                "tags": [
                    "Debts"
                ],
                "summary": "Obtener pagos desde Stripe",
                "description": "Obtiene todos los pagos registrados en Stripe asociados a un estudiante específico. Se puede filtrar por año y forzar actualización del caché.",
                "operationId": "2cfb99fd90ec0bdfca0390092fc7b901",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint (solo para documentación, ej. 'admin')",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.stripe.payments"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Email, CURP o n_control",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "25687290"
                        }
                    },
                    {
                        "name": "year",
                        "in": "query",
                        "description": "Año específico de los pagos",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 2025
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos obtenidos correctamente desde Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/StripePaymentsResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Error de Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts/validate": {
            "post": {
                "tags": [
                    "Debts"
                ],
                "summary": "Validar un pago de Stripe",
                "description": "Valida un pago realizado en Stripe mediante el `payment_intent_id` y la búsqueda del estudiante.",
                "operationId": "01bdc2c4def06e86731b979236cc8343",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "validate.debt"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ValidatePaymentRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pago validado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "validated_payment": {
                                                            "$ref": "#/components/schemas/PaymentValidateResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Error de Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts": {
            "get": {
                "tags": [
                    "Debts"
                ],
                "summary": "Listar pagos pendientes",
                "description": "Obtiene una lista paginada de todos los pagos pendientes registrados. Permite buscar por nombre o control del estudiante, paginar los resultados y forzar la actualización del caché.",
                "operationId": "7330341c4080eb07af2b02ed10cbe916",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.debts"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Texto de búsqueda para filtrar por CURP, email o número de control del estudiante.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "example@gmail.com"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos pendientes obtenida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "pending_payments": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/ConceptNameAndAmountResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts": {
            "get": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Listar conceptos de pago",
                "description": "Obtiene una lista paginada de conceptos de pago, con filtros opcionales por estado y control de caché.",
                "operationId": "0751bbc7b70591e8e6dcbc42c9acfe1b",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.concepts"
                        }
                    },
                    {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a obtener",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza actualización de caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de conceptos de pago obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concepts": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/ConceptsListItem"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Crear un nuevo concepto de pago",
                "description": "Crea un nuevo concepto de pago y lo asocia con las entidades correspondientes (carreras, semestres, estudiantes).",
                "operationId": "4ddd21f74c97eaee178b654ea9d7e279",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "create.concepts"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StorePaymentConceptRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Concepto de pago creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/CreatePaymentConceptResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}": {
            "get": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Buscar concepto de pago por ID",
                "description": "Obtiene la información de un concepto de pago específico mediante su identificador.",
                "operationId": "cc1c97853a9cf745cb9022d757c11388",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto a buscar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto encontrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptToDisplay"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Actualizar un concepto de pago",
                "description": "Actualiza los datos de un concepto de pago existente. Todos los campos son opcionales (usar 'sometimes'), excepto el id en la ruta.",
                "operationId": "6512d85d37c919363528eee4f9a59f00",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "update.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto de pago",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePaymentConceptRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Concepto actualizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UpdatePaymentConceptResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/relations/{id}": {
            "get": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Buscar relaciones del concepto de pago por ID",
                "description": "Obtiene la información de las relaciones de un concepto de pago específico mediante su identificador.",
                "operationId": "2760a991381b3bbb605160000d6061b4",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto a buscar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto encontrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptRelationsToDisplay"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/search/controls": {
            "get": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Buscar números de control de estudiantes",
                "description": "Realiza una búsqueda de números de control de estudiantes activos. Los resultados se cachean por defecto.",
                "operationId": "c7b4ce808d11ae1874131962fc18b09e",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Texto para buscar en números de control (búsqueda por prefijo)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "maxLength": 50,
                            "minLength": 1,
                            "example": "2023"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Límite de resultados (1-50), por defecto 15",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15,
                            "maximum": 50,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar refresco del cache",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Búsqueda exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/StudentControlNumber"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/update-relations/{id}": {
            "patch": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Actualizar relaciones de un concepto de pago",
                "description": "Actualiza las relaciones de un concepto de pago existente.",
                "operationId": "855f595c758dfcf9107f4a3eb86f31e1",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "update.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto de pago",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePaymentConceptRelationsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Relaciones del concepto actualizadas correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/UpdatePaymentConceptRelationsResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{concept}/finalize": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Finalizar concepto de pago",
                "operationId": "7df4bab14521c774ee9f3ae82649945f",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "finalize.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto finalizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptChangeStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{concept}/disable": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Deshabilitar un concepto de pago",
                "operationId": "c9782dbf77ddb14461d2ab2deb7e1277",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "disable.concepts"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto deshabilitado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptChangeStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{concept}/activate": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Habilitar un concepto de pago",
                "operationId": "3e65619ddfcb7ee9e48091582c6e1166",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "activate.concepts"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto activado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptChangeStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}/eliminate": {
            "delete": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Eliminar concepto de pago (físicamente)",
                "operationId": "e962bfdca1f18221f0a972d46078a70c",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "eliminate.concepts"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto de pago eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{concept}/eliminateLogical": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Eliminar concepto de pago (lógicamente)",
                "operationId": "a857989959978a46065196f622c3d603",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "eliminate.logical.concepts"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "concept": {
                                                            "$ref": "#/components/schemas/ConceptChangeStatusResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Obtener lista de pagos",
                "description": "Devuelve una lista paginada de pagos registrados, con opción de búsqueda por email, CURP o número de control, y posibilidad de forzar actualización del caché.",
                "operationId": "getPayments",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtro opcional para buscar por email, nombre o nombre de concepto de pago.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "example@gmail.com"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de resultados por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PaymentListItemResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/by-concept": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Obtener lista de pagos por concepto",
                "description": "Devuelve una lista paginada de pagos registrados por concepto, con opción de búsqueda por email, CURP o número de control, y posibilidad de forzar actualización del caché.",
                "operationId": "getPaymentsByConcept",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtro opcional para buscar por email, nombre o nombre de concepto de pago.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "example@gmail.com"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de resultados por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PaymentsMadeByConceptName"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/students": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Obtener lista de alumnos",
                "description": "Devuelve una lista paginada de estudiantes registrados, con opción de búsqueda por email, CURP o número de control, y posibilidad de forzar actualización del caché.",
                "operationId": "getStudents",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "financial-staff"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments.student.summary"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtro opcional para buscar por email, CURP o número de control del estudiante.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "PERA020804MSHPNXA8"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de resultados por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de estudiantes obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payments": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/UserWithPendingSumamaryResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cards/{paymentMethodId}": {
            "delete": {
                "tags": [
                    "Cards"
                ],
                "summary": "Eliminar un método de pago",
                "description": "Elimina un método de pago específico asociado al usuario autenticado.",
                "operationId": "deleteUserCard",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.cards"
                        }
                    },
                    {
                        "name": "paymentMethodId",
                        "in": "path",
                        "description": "ID del método de pago a eliminar (por ejemplo, 'pm_1P7E89AjcPzVqRkV')",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "pm_1P7E89AjcPzVqRkV"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Método de pago eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Método de pago eliminado correctamente"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cards": {
            "post": {
                "tags": [
                    "Cards"
                ],
                "summary": "Registrar un nuevo método de pago",
                "description": "Crea una sesión de Stripe Checkout para registrar una nueva tarjeta del usuario autenticado.",
                "operationId": "addUserCard",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "create.setup"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Sesión de registro de método de pago creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "checkout_url": {
                                                            "description": "Url del checkout para agregar tarjeta",
                                                            "type": "string",
                                                            "example": "https://checkout.stripe.com/c/pay/cs_test_xxx"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cards/{studentId?}": {
            "get": {
                "tags": [
                    "Cards"
                ],
                "summary": "Listar métodos de pago del usuario autenticado",
                "description": "Obtiene la lista de tarjetas o métodos de pago asociados al usuario autenticado. Permite forzar actualización del caché.",
                "operationId": "getUserCards",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "delete.card"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché.",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de métodos de pago obtenida correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "cards": {
                                                            "description": "Lista de métodos de pago del usuario",
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/DisplayPaymentMethodResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "No se encontraron métodos de pago.",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/refresh/{studentId?}": {
            "post": {
                "tags": [
                    "Dashboard Student"
                ],
                "summary": "Limpiar caché del dashboard",
                "description": "Limpia el caché de datos almacenados en el dashboard (estadísticas, pagos, etc.)",
                "operationId": "refreshDashboardCache",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "refresh.all.dashboard"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Caché del dashboard limpiado con éxito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/history/{studentId?}": {
            "get": {
                "tags": [
                    "Dashboard Student"
                ],
                "summary": "Obtener historial de pagos del usuario autenticado",
                "description": "Devuelve una lista paginada con el historial de pagos realizados por el usuario autenticado. Permite forzar la actualización del caché.",
                "operationId": "getPaymentHistory",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments.summary"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de pagos obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payment_history": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PaymentHistoryResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/overdue/{studentId?}": {
            "get": {
                "tags": [
                    "Dashboard Student"
                ],
                "summary": "Obtener total de pagos vencidos del usuario",
                "description": "Devuelve el monto total de los pagos vencidos asociados al usuario autenticado.",
                "operationId": "getOverduePayments",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.own.overdue.concepts.summary"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cantidad de pagos vencidos obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "total_overdue": {
                                                            "$ref": "#/components/schemas/PendingSummaryResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/paid/{studentId?}": {
            "get": {
                "tags": [
                    "Dashboard Student"
                ],
                "summary": "Obtener total de pagos realizados por el usuario",
                "description": "Devuelve el monto total de pagos completados por el usuario autenticado.",
                "operationId": "getPaidAmount",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.own.paid.concepts.summary"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Monto total de pagos realizados obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "paid_data": {
                                                    "$ref": "#/components/schemas/PaymentsSummaryResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/pending/{studentId?}": {
            "get": {
                "tags": [
                    "Dashboard Student"
                ],
                "summary": "Obtener total de pagos pendientes del usuario",
                "description": "Devuelve la cantidad y monto total de los pagos pendientes del usuario autenticado.",
                "operationId": "getPendingPayments",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.own.pending.concepts.summary"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Totales de pagos pendientes obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "total_pending": {
                                                            "$ref": "#/components/schemas/PendingSummaryResponse"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/history/{studentId?}": {
            "get": {
                "tags": [
                    "Payment History"
                ],
                "summary": "Obtener historial de pagos del usuario autenticado",
                "description": "Devuelve el historial de pagos del usuario logueado, con soporte para paginación y cacheo.",
                "operationId": "getUserPaymentHistory",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments.history"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de pagos obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payment_history": {
                                                            "allOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                                },
                                                                {
                                                                    "properties": {
                                                                        "items": {
                                                                            "type": "array",
                                                                            "items": {
                                                                                "$ref": "#/components/schemas/PaymentHistoryResponse"
                                                                            }
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/history/payment/{id}": {
            "get": {
                "tags": [
                    "Payment History"
                ],
                "summary": "Buscar pago por ID",
                "description": "Obtiene la información detallada de un pago específico mediante su identificador.",
                "operationId": "bfdc5a23532922021c759986f140662f",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.payments.history"
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del pago a buscar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pago encontrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "payment": {
                                                            "$ref": "#/components/schemas/PaymentToDisplay"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments/history/receipt/{paymentId}": {
            "get": {
                "tags": [
                    "Receipts"
                ],
                "summary": "Obtener URL del recibo de pago",
                "description": "Genera y devuelve una URL temporal firmada para visualizar o descargar el recibo de un pago específico en formato HTML.",
                "operationId": "d66b748e6d1786566dbf7d929ad1dfe7",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.receipt"
                        }
                    },
                    {
                        "name": "paymentId",
                        "in": "path",
                        "description": "ID del pago para generar el recibo",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 123
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "URL del recibo generada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "url": {
                                                    "description": "URL temporal firmada con validez de 5 minutos para visualizar o descargar el recibo",
                                                    "type": "string",
                                                    "format": "uri",
                                                    "example": "https://storage.googleapis.com/bucket-name/receipts/2024/02/REC-123.html?X-Goog-Algorithm=...&X-Goog-Expires=300"
                                                },
                                                "expires_in": {
                                                    "description": "Tiempo de expiración en segundos",
                                                    "type": "integer",
                                                    "example": 300
                                                },
                                                "content_type": {
                                                    "description": "Tipo de contenido del archivo",
                                                    "type": "string",
                                                    "example": "text/html"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Recibo generado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pago no encontrado o recibo no disponible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Recibo no encontrado"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado - Permiso 'view.receipt' requerido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized - Missing permission: view.receipt"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno al generar el recibo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error al generar el recibo"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pending-payments/{studentId?}": {
            "get": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Obtener pagos pendientes del usuario autenticado",
                "description": "Devuelve todos los conceptos pendientes de pago del usuario logueado.",
                "operationId": "getUserPendingPayments",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.pending.concepts"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children, (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos pendientes obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "pending_payments": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PendingPaymentConceptsResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pending-payments": {
            "post": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Generar intento de pago para un concepto pendiente",
                "description": "Crea un intento de pago en Stripe (u otro proveedor) para el concepto indicado y devuelve la URL del checkout.",
                "operationId": "createPaymentIntent",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "create.payment"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos necesarios para generar el intento de pago",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PayConceptRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Intento de pago generado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "url_checkout": {
                                                            "type": "string",
                                                            "example": "https://checkout.stripe.com/pay/cs_test_a1b2c3d4e5"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Error de Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pending-payments/overdue/{studentId?}": {
            "get": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Obtener pagos vencidos del usuario autenticado",
                "description": "Devuelve los pagos que ya están vencidos para el usuario autenticado.",
                "operationId": "getUserOverduePayments",
                "parameters": [
                    {
                        "name": "X-User-Role",
                        "in": "header",
                        "description": "Rol requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "student|parent"
                        }
                    },
                    {
                        "name": "X-User-Permission",
                        "in": "header",
                        "description": "Permiso requerido para este endpoint",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "view.overdue.concepts"
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del children, (opcional)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos vencidos obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/SuccessResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "pending_payments": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PendingPaymentConceptsResponse"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Demasiadas solicitudes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "LoginDTO": {
                "description": "Datos necesarios para iniciar sesión",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "usuario@example.com"
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "example": "secret123"
                    }
                },
                "type": "object"
            },
            "CreatePaymentConceptDTO": {
                "description": "Datos para crear un concepto de pago",
                "properties": {
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "status": {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "appliesTo": {
                        "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                    },
                    "semesters": {
                        "description": "Semestres asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    },
                    "careers": {
                        "description": "Carreras asociadas al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ],
                        "nullable": true
                    },
                    "students": {
                        "description": "Numeros de control de estudiantes asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    },
                    "exceptionStudents": {
                        "description": "Numeros de control de estudiantes a los que el concepto no aplica",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    },
                    "applicantTags": {
                        "description": "Array para aplicar conceptos a alumnos con casos especiales",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "no_student_details",
                            "applicants"
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptDTO": {
                "description": "Datos para actualizar un concepto de pago",
                "required": [
                    "id",
                    "fieldsToUpdate"
                ],
                "properties": {
                    "id": {
                        "description": "ID del concepto a actualizar",
                        "type": "integer",
                        "example": 1
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptRelationsDTO": {
                "description": "Datos para actualizar un concepto de pago",
                "required": [
                    "id"
                ],
                "properties": {
                    "id": {
                        "description": "ID del concepto a actualizar",
                        "type": "integer",
                        "example": 1
                    },
                    "semesters": {
                        "description": "Semestres asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    },
                    "careers": {
                        "description": "Carreras asociadas al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ],
                        "nullable": true
                    },
                    "students": {
                        "description": "Numeros de control de estudiantes asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    },
                    "exceptionStudents": {
                        "description": "Numeros de control de estudiantes a los que el concepto no aplica",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    },
                    "applicantTags": {
                        "description": "Array para aplicar conceptos a alumnos con casos especiales",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "no_student_details",
                            "applicants"
                        ],
                        "nullable": true
                    },
                    "appliesTo": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                            }
                        ],
                        "nullable": true,
                        "description": "A quién aplica el concepto",
                        "example": "todos"
                    },
                    "replaceRelations": {
                        "description": "Si es true, reemplaza las relaciones existentes con las nuevas",
                        "type": "boolean",
                        "example": false
                    },
                    "replaceExceptions": {
                        "description": "Si es true, reemplaza los estudiantes a los que no aplica el concepto",
                        "type": "boolean",
                        "example": false
                    },
                    "removeAllExceptions": {
                        "description": "Si es true, elimina los estudiantes a los que no aplicaba el concepto",
                        "type": "boolean",
                        "example": false
                    }
                },
                "type": "object"
            },
            "CreateStudentDetailDTO": {
                "description": "Datos para crear un detalle de estudiante",
                "properties": {
                    "user_id": {
                        "description": "ID del usuario asociado al detalle",
                        "type": "integer",
                        "example": 1
                    },
                    "career_id": {
                        "description": "ID de la carrera del estudiante",
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "123456",
                        "nullable": true
                    },
                    "semestre": {
                        "description": "Semestre actual del estudiante",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    },
                    "group": {
                        "description": "Grupo del estudiante",
                        "type": "string",
                        "example": "A",
                        "nullable": true
                    },
                    "workshop": {
                        "description": "Taller asignado al estudiante",
                        "type": "string",
                        "example": "Taller de matemáticas",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "CreateUserDTO": {
                "description": "Datos para crear un nuevo usuario",
                "required": [
                    "name",
                    "last_name",
                    "email",
                    "password",
                    "phone_number",
                    "curp"
                ],
                "properties": {
                    "name": {
                        "description": "Nombre del usuario",
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "description": "Apellido del usuario",
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "description": "Contraseña del usuario",
                        "type": "string",
                        "format": "password",
                        "example": "Password123!"
                    },
                    "phone_number": {
                        "description": "Número de teléfono",
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "birthdate": {
                        "description": "Fecha de nacimiento",
                        "type": "string",
                        "format": "date",
                        "example": "1995-04-23",
                        "nullable": true
                    },
                    "gender": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserGender"
                            }
                        ],
                        "nullable": true,
                        "description": "Género del usuario",
                        "example": "male"
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "PEPJ950423HDFRRL09"
                    },
                    "address": {
                        "description": "Dirección del usuario",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "nullable": true
                    },
                    "blood_type": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserBloodType"
                            }
                        ],
                        "nullable": true,
                        "description": "Tipo de sangre",
                        "example": "O+"
                    },
                    "registration_date": {
                        "description": "Fecha de registro",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-04T19:00:00Z",
                        "nullable": true
                    },
                    "status": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserStatus"
                            }
                        ],
                        "nullable": true,
                        "description": "Estado del usuario",
                        "example": "activo"
                    }
                },
                "type": "object"
            },
            "UpdateUserPermissionsDTO": {
                "properties": {
                    "curps": {
                        "description": "Lista de CURPs de los usuarios a actualizar",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "XAXX010101HNEXXXA",
                            "XEXX010101HNEXXXB"
                        ]
                    },
                    "role": {
                        "description": "Cadena de texto que representa el role a quienes se aplicaran los cambios",
                        "type": "string",
                        "example": [
                            "student"
                        ]
                    },
                    "permissionsToAdd": {
                        "description": "Lista de permisos a agregar a los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "find user",
                            "find concept"
                        ]
                    },
                    "permissionsToRemove": {
                        "description": "Lista de permisos a remover de los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "delete payment"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdateUserRoleDTO": {
                "description": "Datos para actualizar roles de múltiples usuarios",
                "required": [
                    "curps"
                ],
                "properties": {
                    "curps": {
                        "description": "Lista de CURPs de los usuarios a actualizar",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "example": "PEPJ800101HDFRRN09"
                        }
                    },
                    "rolesToAdd": {
                        "description": "Lista de roles que se añadirán a los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "student",
                            "admin"
                        ]
                    },
                    "rolesToRemove": {
                        "description": "Lista de roles que se eliminarán de los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "guest"
                        ]
                    }
                },
                "type": "object"
            },
            "ImportResponse": {
                "properties": {
                    "summary": {
                        "properties": {
                            "total_rows_received": {
                                "description": "Total de filas recibidas en el archivo",
                                "type": "integer",
                                "example": 100
                            },
                            "rows_processed": {
                                "description": "Filas procesadas después de validación",
                                "type": "integer",
                                "example": 95
                            },
                            "rows_inserted": {
                                "description": "Filas insertadas exitosamente",
                                "type": "integer",
                                "example": 90
                            },
                            "rows_failed": {
                                "description": "Filas que fallaron (no insertadas)",
                                "type": "integer",
                                "example": 5
                            },
                            "success_rate": {
                                "description": "Porcentaje de éxito (rows_inserted/rows_processed)",
                                "type": "number",
                                "format": "float",
                                "example": 94.74
                            }
                        },
                        "type": "object"
                    },
                    "errors": {
                        "properties": {
                            "row_errors": {
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "example": "row_error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "CURP requerida"
                                        },
                                        "row_number": {
                                            "type": "integer",
                                            "example": 15
                                        },
                                        "context": {
                                            "properties": {
                                                "curp": {
                                                    "type": "string",
                                                    "example": "N/A"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "global_errors": {
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "example": "global_error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en base de datos"
                                        },
                                        "chunk_index": {
                                            "type": "integer",
                                            "example": 2
                                        },
                                        "rows_count": {
                                            "type": "integer",
                                            "example": 50
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "total_errors": {
                                "type": "integer",
                                "example": 3
                            }
                        },
                        "type": "object"
                    },
                    "warnings": {
                        "properties": {
                            "list": {
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "example": "warning"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Chunk sin datos válidos"
                                        },
                                        "chunk_index": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "rows_count": {
                                            "type": "integer",
                                            "example": 20
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "total_warnings": {
                                "type": "integer",
                                "example": 2
                            }
                        },
                        "type": "object"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15 10:30:00"
                    },
                    "has_errors": {
                        "type": "boolean",
                        "example": false
                    },
                    "has_warnings": {
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "LoginResponse": {
                "properties": {
                    "access_token": {
                        "description": "Token de acceso JWT",
                        "type": "string",
                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                        "nullable": true
                    },
                    "refresh_token": {
                        "description": "Token para refrescar el access_token",
                        "type": "string",
                        "example": "dGhpcy1pcy1hLXJlZnJlc2gtdG9rZW4=",
                        "nullable": true
                    },
                    "token_type": {
                        "description": "Tipo de token, normalmente 'bearer'",
                        "type": "string",
                        "example": "bearer",
                        "nullable": true
                    },
                    "user_data": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 1
                                },
                                "fullName": {
                                    "type": "string",
                                    "example": "Carlos Antonio"
                                },
                                "roles": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    },
                                    "example": [
                                        "student"
                                    ]
                                },
                                "hasUnreadNotifications": {
                                    "type": "boolean",
                                    "example": true
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "PaginatedResponse": {
                "properties": {
                    "items": {
                        "description": "Lista de elementos paginados",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": true
                    },
                    "currentPage": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "lastPage": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "perPage": {
                        "type": "integer",
                        "example": 15,
                        "nullable": true
                    },
                    "total": {
                        "type": "integer",
                        "example": 72,
                        "nullable": true
                    },
                    "hasMorePages": {
                        "type": "boolean",
                        "example": true,
                        "nullable": true
                    },
                    "nextPage": {
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "previousPage": {
                        "type": "integer",
                        "example": null,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PermissionToDisplay": {
                "title": "Permission To Display",
                "description": "Permission data formatted for UI display purposes",
                "properties": {
                    "id": {
                        "description": "Unique permission ID",
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "description": "Internal permission name",
                        "type": "string",
                        "example": "users.create"
                    },
                    "type": {
                        "description": "Permission type",
                        "type": "string",
                        "example": "model"
                    },
                    "label": {
                        "description": "Label para lectura",
                        "type": "string",
                        "example": "Crear usuarios"
                    },
                    "group": {
                        "description": "UI grupo o categoria del permiso",
                        "type": "string",
                        "example": "Usuarios"
                    }
                },
                "type": "object"
            },
            "PermissionsByRole": {
                "properties": {
                    "role": {
                        "type": "string",
                        "example": "student"
                    },
                    "usersCount": {
                        "type": "integer",
                        "example": 120
                    },
                    "permissions": {
                        "description": "Lista de permisos de los usuarios",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PermissionsByUsers": {
                "properties": {
                    "roles": {
                        "description": "Lista de roles de los usuarios a los que aplican los permisos",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": false
                    },
                    "users": {
                        "description": "Lista de usuarios a los que aplican los permisos",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": false
                    },
                    "permissions": {
                        "description": "Lista de permisos de los usuarios",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PermissionsUpdatedToUserResponse": {
                "description": "Respuesta con los permisos actualizados de un usuario",
                "properties": {
                    "userId": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 4
                    },
                    "fullName": {
                        "description": "Nombre completos del usuario afectados",
                        "type": "string",
                        "example": "Juan Perez"
                    },
                    "permissions": {
                        "description": "Lista de permisos actualizados (añadidos o removidos)",
                        "properties": {
                            "added": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "view.students"
                                ]
                            },
                            "removed": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "create.student"
                                ]
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ReconciliationResult": {
                "properties": {
                    "processed": {
                        "type": "integer",
                        "example": 0
                    },
                    "updated": {
                        "type": "integer",
                        "example": 0
                    },
                    "notified": {
                        "type": "integer",
                        "example": 0
                    },
                    "failed": {
                        "type": "integer",
                        "example": 0
                    }
                },
                "type": "object"
            },
            "RolesUpdatedToUserResponse": {
                "description": "Respuesta con los roles actualizados de un usuario",
                "properties": {
                    "userId": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 4
                    },
                    "fullName": {
                        "description": "Nombre completos del usuario afectados",
                        "type": "string",
                        "example": "Juan Perez"
                    },
                    "roles": {
                        "description": "Roles agregados y removidos",
                        "properties": {
                            "added": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "student"
                                ]
                            },
                            "removed": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "guest"
                                ]
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "StripePaymentsResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago en Stripe",
                        "type": "string",
                        "example": "pay_01HXXXXXX",
                        "nullable": true
                    },
                    "payment_intent_id": {
                        "description": "ID del Payment Intent en Stripe",
                        "type": "string",
                        "example": "pi_01HXXXXXX",
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "succeeded",
                        "nullable": true
                    },
                    "amount_total": {
                        "description": "Monto total del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "amount_received": {
                        "description": "Monto total recibido",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "created": {
                        "description": "Fecha de creación del pago en formato timestamp",
                        "type": "string",
                        "example": "2025-11-04T18:30:00Z",
                        "nullable": true
                    },
                    "receipt_url": {
                        "description": "Comprobante del alumno",
                        "type": "string",
                        "example": "https://recipient_url",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "StripePayoutResponse": {
                "description": "Respuesta de creación de payout en Stripe",
                "properties": {
                    "success": {
                        "description": "Indica si el payout fue creado exitosamente",
                        "type": "boolean",
                        "example": true
                    },
                    "payout_id": {
                        "description": "ID único del payout en Stripe (prefijo 'po_')",
                        "type": "string",
                        "example": "po_1PZ8ex2eZvKYlo2CQhxEXAMPLE"
                    },
                    "amount": {
                        "description": "Monto del payout en formato decimal con 2 decimales",
                        "type": "string",
                        "example": "1500.50"
                    },
                    "currency": {
                        "description": "Código de moneda ISO 4217 (mxn para pesos mexicanos)",
                        "type": "string",
                        "example": "mxn"
                    },
                    "arrival_date": {
                        "description": "Fecha estimada de llegada de los fondos en formato YYYY-MM-DD",
                        "type": "string",
                        "format": "date",
                        "example": "2024-01-15"
                    },
                    "status": {
                        "description": "Estado actual del payout en Stripe",
                        "type": "string",
                        "enum": [
                            "pending",
                            "in_transit",
                            "paid",
                            "failed",
                            "canceled"
                        ],
                        "example": "pending"
                    },
                    "available_before_payout": {
                        "description": "Balance disponible antes de crear el payout",
                        "type": "string",
                        "example": "1500.50"
                    }
                },
                "type": "object"
            },
            "ParentChildrenResponse": {
                "description": "Respuesta del get que muestra los hijos del padre",
                "properties": {
                    "parentId": {
                        "description": "Id del parent",
                        "type": "integer",
                        "example": 1
                    },
                    "parentName": {
                        "description": "Nombre del parent",
                        "type": "string",
                        "example": "Juan Perez"
                    },
                    "childrenData": {
                        "description": "Hijos del familiar",
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 3
                                },
                                "name": {
                                    "type": "string",
                                    "example": "Jesus Perez"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "StudentParentsResponse": {
                "description": "Respuesta del get que muestra los hijos del padre",
                "properties": {
                    "studentId": {
                        "description": "Id del estudiante",
                        "type": "integer",
                        "example": 1
                    },
                    "studentName": {
                        "description": "Nombre del estudiante",
                        "type": "string",
                        "example": "Juan Perez"
                    },
                    "parentsData": {
                        "description": "Familiares del estudiante",
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 3
                                },
                                "name": {
                                    "type": "string",
                                    "example": "Jesus Perez"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "ConceptChangeStatusResponse": {
                "title": "Respuesta de cambio de estado de concepto de pago",
                "description": "Respuesta detallada al cambiar el estado de un concepto de pago",
                "required": [
                    "conceptData",
                    "message",
                    "changes",
                    "updatedAt"
                ],
                "properties": {
                    "conceptData": {
                        "description": "Datos actualizados del concepto de pago",
                        "required": [
                            "id",
                            "concept_name",
                            "status",
                            "amount",
                            "start_date",
                            "end_date",
                            "applies_to"
                        ],
                        "properties": {
                            "id": {
                                "description": "ID del concepto",
                                "type": "integer",
                                "example": 123
                            },
                            "concept_name": {
                                "description": "Nombre del concepto",
                                "type": "string",
                                "example": "Matrícula 2024"
                            },
                            "status": {
                                "description": "Nuevo estado del concepto",
                                "type": "string",
                                "enum": [
                                    "activo",
                                    "inactivo",
                                    "finalizado",
                                    "cancelado",
                                    "pendiente"
                                ],
                                "example": "finalizado"
                            },
                            "amount": {
                                "description": "Monto del concepto",
                                "type": "number",
                                "format": "float",
                                "example": 1500
                            },
                            "start_date": {
                                "description": "Fecha de inicio",
                                "type": "string",
                                "format": "date",
                                "example": "2024-01-15"
                            },
                            "end_date": {
                                "description": "Fecha de fin",
                                "type": "string",
                                "format": "date",
                                "example": "2024-12-31"
                            },
                            "applies_to": {
                                "description": "A quién aplica el concepto",
                                "type": "string",
                                "enum": [
                                    "todos",
                                    "carrera",
                                    "semestre",
                                    "estudiantes",
                                    "carrera_semestre",
                                    "tag"
                                ],
                                "example": "carrera"
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "description": "Mensaje descriptivo del resultado",
                        "type": "string",
                        "example": "Concepto 'Matrícula 2024' finalizado exitosamente"
                    },
                    "changes": {
                        "description": "Lista de cambios realizados",
                        "type": "array",
                        "items": {
                            "required": [
                                "field",
                                "old",
                                "new",
                                "type",
                                "transition_type"
                            ],
                            "properties": {
                                "field": {
                                    "description": "Campo modificado",
                                    "type": "string",
                                    "example": "status"
                                },
                                "old": {
                                    "description": "Valor anterior",
                                    "type": "string",
                                    "example": "activo"
                                },
                                "new": {
                                    "description": "Valor nuevo",
                                    "type": "string",
                                    "example": "finalizado"
                                },
                                "type": {
                                    "description": "Tipo de cambio",
                                    "type": "string",
                                    "example": "status_change"
                                },
                                "transition_type": {
                                    "description": "Tipo de transición realizada",
                                    "type": "string",
                                    "enum": [
                                        "activate",
                                        "deactivate",
                                        "finalize",
                                        "cancel"
                                    ],
                                    "example": "finalize"
                                }
                            },
                            "type": "object"
                        },
                        "example": [
                            {
                                "field": "status",
                                "old": "activo",
                                "new": "finalizado",
                                "type": "status_change",
                                "transition_type": "finalize"
                            }
                        ]
                    },
                    "updatedAt": {
                        "description": "Fecha y hora de la actualización",
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T10:30:00Z"
                    }
                },
                "type": "object"
            },
            "ConceptNameAndAmountResponse": {
                "properties": {
                    "userId": {
                        "description": "ID del usuario asociado al pago",
                        "type": "string",
                        "example": 34,
                        "nullable": true
                    },
                    "user_name": {
                        "description": "Nombre del usuario asociado al pago",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Número de control del usuario asociado al pago",
                        "type": "string",
                        "example": "97763726",
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ConceptRelationsToDisplay": {
                "description": "Representa las relaciones de un concepto de pago",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "applies_to": {
                        "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                    },
                    "users": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12324",
                            "2435646",
                            "3323232"
                        ]
                    },
                    "careers": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "semesters": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "exceptionUsers": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12326",
                            "24646",
                            "33232"
                        ]
                    },
                    "applicantTags": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PaymentConceptApplicantType"
                        }
                    }
                },
                "type": "object"
            },
            "ConceptToDisplay": {
                "description": "Representa un concepto de pago",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "status": {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01"
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "applies_to": {
                        "type": "string",
                        "example": "todos"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "deleted_at": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "created_at_human": {
                        "type": "string",
                        "example": "hace 2 dias",
                        "nullable": true
                    },
                    "updated_at_human": {
                        "type": "string",
                        "example": "hace 2 dias",
                        "nullable": true
                    },
                    "deleted_at_human": {
                        "type": "string",
                        "example": "hace 2 dias",
                        "nullable": true
                    },
                    "days_until_deletion": {
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "expiration_human": {
                        "description": "Texto humano que indica el estado de expiración",
                        "type": "string",
                        "example": "Vence en 3 días",
                        "nullable": true
                    },
                    "expiration_info": {
                        "description": "Información detallada sobre la expiración",
                        "properties": {
                            "text": {
                                "type": "string",
                                "example": "Vence en 3 días",
                                "nullable": true
                            },
                            "days": {
                                "description": "Días restantes (negativo si ya expiró)",
                                "type": "integer",
                                "example": 3,
                                "nullable": true
                            },
                            "is_expired": {
                                "type": "boolean",
                                "example": false
                            },
                            "is_today": {
                                "description": "Si vence hoy",
                                "type": "boolean",
                                "example": false
                            },
                            "urgency": {
                                "description": "Nivel de urgencia: expirado, critico, alto, medio, bajo",
                                "type": "string",
                                "example": "medio"
                            },
                            "date_formatted": {
                                "description": "Fecha formateada en español",
                                "type": "string",
                                "example": "1 de diciembre de 2025"
                            },
                            "date_short": {
                                "description": "Fecha en formato corto",
                                "type": "string",
                                "example": "01/12/2025"
                            }
                        },
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ConceptsToDashboardResponse": {
                "properties": {
                    "id": {
                        "description": "ID del concepto",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del concepto",
                        "type": "string",
                        "example": "activo",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del concepto",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "applies_to": {
                        "description": "A quién aplica el concepto",
                        "type": "string",
                        "example": "todos",
                        "nullable": true
                    },
                    "start_date": {
                        "description": "Fecha de inicio de validez",
                        "type": "string",
                        "format": "date",
                        "example": "2025-11-01",
                        "nullable": true
                    },
                    "end_date": {
                        "description": "Fecha de fin de validez",
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-01",
                        "nullable": true
                    },
                    "expiration_human": {
                        "description": "Texto humano que indica el estado de expiración",
                        "type": "string",
                        "example": "Vence en 3 días",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "CreatePaymentConceptResponse": {
                "required": [
                    "id",
                    "conceptName",
                    "status",
                    "appliesTo",
                    "amount",
                    "startDate",
                    "endDate",
                    "affectedStudentsCount",
                    "message",
                    "createdAt"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 123
                    },
                    "conceptName": {
                        "type": "string",
                        "example": "Matrícula 2024"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "pending"
                        ],
                        "example": "active"
                    },
                    "appliesTo": {
                        "type": "string",
                        "enum": [
                            "career",
                            "semester",
                            "students",
                            "career_semester",
                            "tag",
                            "all"
                        ],
                        "example": "career"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago de matrícula del semestre",
                        "nullable": true
                    },
                    "amount": {
                        "type": "number",
                        "format": "float",
                        "example": 1500
                    },
                    "startDate": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-01-15"
                    },
                    "endDate": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-02-15",
                        "nullable": true
                    },
                    "affectedStudentsCount": {
                        "type": "integer",
                        "example": 245
                    },
                    "metadata": {
                        "properties": {
                            "exception_count": {
                                "type": "integer",
                                "example": 5
                            },
                            "career_count": {
                                "type": "integer",
                                "example": 3
                            },
                            "semester_count": {
                                "type": "integer",
                                "example": 2
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "type": "string",
                        "example": "Concepto creado exitosamente. Afecta a 245 estudiante(s)"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-10 10:30:00"
                    }
                },
                "type": "object"
            },
            "PendingPaymentConceptsResponse": {
                "properties": {
                    "id": {
                        "description": "ID del concepto pendiente",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto pendiente",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "description": {
                        "description": "Descripción del concepto",
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025-2",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del concepto pendiente",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "start_date": {
                        "description": "Fecha de inicio del concepto pendiente",
                        "type": "string",
                        "format": "date",
                        "example": "2025-11-01",
                        "nullable": true
                    },
                    "end_date": {
                        "description": "Fecha de finalización del concepto pendiente",
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-01",
                        "nullable": true
                    },
                    "expiration_human": {
                        "description": "Texto humano que indica el estado de expiración",
                        "type": "string",
                        "example": "Vence en 3 días",
                        "nullable": true
                    },
                    "expiration_info": {
                        "description": "Información detallada sobre la expiración",
                        "properties": {
                            "text": {
                                "type": "string",
                                "example": "Vence en 3 días",
                                "nullable": true
                            },
                            "days": {
                                "description": "Días restantes (negativo si ya expiró)",
                                "type": "integer",
                                "example": 3,
                                "nullable": true
                            },
                            "is_expired": {
                                "type": "boolean",
                                "example": false
                            },
                            "is_today": {
                                "description": "Si vence hoy",
                                "type": "boolean",
                                "example": false
                            },
                            "urgency": {
                                "description": "Nivel de urgencia: expirado, critico, alto, medio, bajo",
                                "type": "string",
                                "example": "medio"
                            },
                            "date_formatted": {
                                "description": "Fecha formateada en español",
                                "type": "string",
                                "example": "1 de diciembre de 2025"
                            },
                            "date_short": {
                                "description": "Fecha en formato corto",
                                "type": "string",
                                "example": "01/12/2025"
                            }
                        },
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PendingSummaryResponse": {
                "properties": {
                    "totalAmount": {
                        "description": "Monto total pendiente",
                        "type": "string",
                        "example": "4500.00",
                        "nullable": true
                    },
                    "totalCount": {
                        "description": "Cantidad total de conceptos pendientes",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptRelationsResponse": {
                "required": [
                    "status",
                    "metadata",
                    "message",
                    "updatedAt"
                ],
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "pending"
                        ],
                        "example": "active"
                    },
                    "metadata": {
                        "properties": {
                            "concept_name": {
                                "type": "string",
                                "example": "Cuota renscripción"
                            },
                            "global_status": {
                                "type": "boolean",
                                "example": false
                            },
                            "students_count": {
                                "type": "integer",
                                "example": 5
                            },
                            "exception_count": {
                                "type": "integer",
                                "example": 5
                            },
                            "career_count": {
                                "type": "integer",
                                "example": 3
                            },
                            "semester_count": {
                                "type": "integer",
                                "example": 2
                            },
                            "tags": {
                                "type": "array",
                                "items": {
                                    "properties": {
                                        "tag_": {
                                            "type": "string",
                                            "example": "no_student_details"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        },
                        "type": "object"
                    },
                    "message": {
                        "type": "string",
                        "example": "Concepto actualizado: Ahora aplica a career. Se agregaron 2 careers"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-12 14:45:00"
                    },
                    "changes": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "field": {
                                    "type": "string",
                                    "example": "applies_to"
                                },
                                "old": {
                                    "type": "string",
                                    "example": "students"
                                },
                                "new": {
                                    "type": "string",
                                    "example": "career"
                                },
                                "type": {
                                    "type": "string",
                                    "example": "applies_to_changed"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "affectedSummary": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "newlyAffectedCount": {
                                    "type": "integer",
                                    "example": 50
                                },
                                "removedCount": {
                                    "type": "integer",
                                    "example": 10
                                },
                                "keptCount": {
                                    "type": "integer",
                                    "example": 0
                                },
                                "totalAffectedCount": {
                                    "type": "integer",
                                    "example": 60
                                },
                                "previouslyAffectedCount": {
                                    "type": "integer",
                                    "example": 20
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptResponse": {
                "required": [
                    "id",
                    "conceptName",
                    "status",
                    "appliesTo",
                    "amount",
                    "startDate",
                    "endDate",
                    "metadata",
                    "message",
                    "updatedAt"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 123
                    },
                    "conceptName": {
                        "type": "string",
                        "example": "Matrícula 2024"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "pending"
                        ],
                        "example": "active"
                    },
                    "appliesTo": {
                        "type": "string",
                        "enum": [
                            "career",
                            "semester",
                            "students",
                            "career_semester",
                            "tag",
                            "all"
                        ],
                        "example": "career"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago de matrícula del semestre",
                        "nullable": true
                    },
                    "amount": {
                        "type": "number",
                        "format": "float",
                        "example": 1500
                    },
                    "startDate": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-01-15"
                    },
                    "endDate": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-02-15"
                    },
                    "message": {
                        "type": "string",
                        "example": "Concepto actualizado: Ahora aplica a career. Se agregaron 2 careers"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-12 14:45:00"
                    },
                    "changes": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "field": {
                                    "type": "string",
                                    "example": "applies_to"
                                },
                                "old": {
                                    "type": "string",
                                    "example": "students"
                                },
                                "new": {
                                    "type": "string",
                                    "example": "career"
                                },
                                "type": {
                                    "type": "string",
                                    "example": "applies_to_changed"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "DisplayPaymentMethodResponse": {
                "properties": {
                    "id": {
                        "description": "ID del método de pago",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "brand": {
                        "description": "Marca de la tarjeta",
                        "type": "string",
                        "example": "Visa",
                        "nullable": true
                    },
                    "masked_card": {
                        "description": "Número de tarjeta enmascarado",
                        "type": "string",
                        "example": "**** **** **** 4242",
                        "nullable": true
                    },
                    "expiration_date": {
                        "description": "Fecha de expiración de la tarjeta",
                        "type": "string",
                        "example": "12/25",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del método de pago",
                        "type": "string",
                        "example": "active",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "SetupCardResponse": {
                "properties": {
                    "id": {
                        "description": "ID de la configuración de la tarjeta",
                        "type": "string",
                        "example": "pm_01HXXXXXX",
                        "nullable": true
                    },
                    "url": {
                        "description": "URL para completar el setup de la tarjeta",
                        "type": "string",
                        "example": "https://example.com/setup/pm_01HXXXXXX",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "FinancialSummaryResponse": {
                "properties": {
                    "totalPayments": {
                        "description": "Monto total bruto de pagos recibidos",
                        "type": "string",
                        "example": "250000.00"
                    },
                    "totalPayouts": {
                        "description": "Monto total neto recibido (payouts)",
                        "type": "string",
                        "example": "230000.00"
                    },
                    "totalFees": {
                        "description": "Monto total de comisiones cobradas por Stripe",
                        "type": "string",
                        "example": "20000.00"
                    },
                    "totalNetReceived": {
                        "description": "Monto total actual en Stripe (available + pending)",
                        "type": "string",
                        "example": "50000.00"
                    },
                    "totalNetAfterFees": {
                        "description": "Monto total después de comisiones (payments - fees)",
                        "type": "string",
                        "example": "230000.00"
                    },
                    "paymentsBySemester": {
                        "description": "Pagos brutos agrupados por semestre",
                        "type": "object",
                        "additionalProperties": {
                            "properties": {
                                "total": {
                                    "description": "Total del semestre",
                                    "type": "string",
                                    "example": "45000.00"
                                },
                                "months": {
                                    "description": "Meses del semestre",
                                    "type": "array",
                                    "items": {
                                        "type": "string",
                                        "example": "15000.00"
                                    }
                                }
                            },
                            "type": "object",
                            "property": null
                        }
                    },
                    "payoutsBySemester": {
                        "description": "Payouts (retiros) agrupados por semestre",
                        "type": "object",
                        "additionalProperties": {
                            "properties": {
                                "total": {
                                    "description": "Total de payouts del semestre",
                                    "type": "string",
                                    "example": "38000.00"
                                },
                                "months": {
                                    "description": "Meses del semestre con sus montos",
                                    "type": "array",
                                    "items": {
                                        "type": "string",
                                        "example": "18000.00"
                                    }
                                }
                            },
                            "type": "object",
                            "property": null
                        }
                    },
                    "feesBySemester": {
                        "description": "Comisiones de Stripe agrupadas por semestre",
                        "type": "object",
                        "additionalProperties": {
                            "properties": {
                                "total": {
                                    "description": "Total de comisiones del semestre",
                                    "type": "string",
                                    "example": "3200.00"
                                },
                                "months": {
                                    "description": "Meses del semestre con sus comisiones",
                                    "type": "array",
                                    "items": {
                                        "type": "string",
                                        "example": "1066.67"
                                    }
                                }
                            },
                            "type": "object",
                            "property": null
                        }
                    },
                    "totalBalanceAvailable": {
                        "description": "Balance total disponible actualmente para retirar",
                        "type": "string",
                        "example": "35000.00"
                    },
                    "totalBalancePending": {
                        "description": "Balance total pendiente (en proceso de liquidación)",
                        "type": "string",
                        "example": "15000.00"
                    },
                    "availablePercentage": {
                        "description": "Porcentaje del balance disponible respecto al total de pagos",
                        "type": "string",
                        "example": "14.00"
                    },
                    "pendingPercentage": {
                        "description": "Porcentaje del balance pendiente respecto al total de pagos",
                        "type": "string",
                        "example": "6.00"
                    },
                    "netReceivedPercentage": {
                        "description": "Porcentaje del dinero en Stripe (available + pending) respecto al total de pagos",
                        "type": "string",
                        "example": "20.00"
                    },
                    "feePercentage": {
                        "description": "Porcentaje total de comisión respecto al total de pagos",
                        "type": "string",
                        "example": "8.00"
                    },
                    "netAfterFeesPercentage": {
                        "description": "Porcentaje de ingresos después de comisiones respecto al total de pagos",
                        "type": "string",
                        "example": "92.00"
                    },
                    "totalBalanceAvailableBySource": {
                        "description": "Balance disponible agrupado por método de pago",
                        "type": "object",
                        "example": {
                            "card": "25000.00",
                            "oxxo": "6000.00",
                            "transfer": "4000.00"
                        }
                    },
                    "totalBalancePendingBySource": {
                        "description": "Balance pendiente agrupado por método de pago",
                        "type": "object",
                        "example": {
                            "card": "9000.00",
                            "oxxo": "3000.00",
                            "transfer": "3000.00"
                        }
                    }
                },
                "type": "object"
            },
            "PaymentDataResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123,
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "amount_received": {
                        "description": "Monto del pago recibido",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "completed",
                        "nullable": true
                    },
                    "payment_intent_id": {
                        "description": "ID del Payment Intent asociado",
                        "type": "string",
                        "example": "pi_01HXXXXXX",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentHistoryResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123,
                        "nullable": true
                    },
                    "concept": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "amount_received": {
                        "description": "Monto del pago recibido",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "status": {
                        "description": "Status del concepto del pago",
                        "type": "string",
                        "example": "paid",
                        "nullable": true
                    },
                    "date": {
                        "description": "Fecha del pago",
                        "type": "string",
                        "example": "hace 2 dias",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentListItemResponse": {
                "properties": {
                    "id": {
                        "description": "ID del pago",
                        "type": "integer",
                        "example": 10
                    },
                    "date": {
                        "description": "Fecha del pago",
                        "type": "string",
                        "example": "2025-11-04",
                        "nullable": true
                    },
                    "concept": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "amount_received": {
                        "description": "Monto del pago recibido",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "method": {
                        "description": "Método de pago usado",
                        "type": "string",
                        "example": "Tarjeta de crédito",
                        "nullable": true
                    },
                    "userId": {
                        "description": "ID del usuario que realizó el pago",
                        "type": "integer",
                        "example": 50,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario que realizó el pago",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentToDisplay": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123
                    },
                    "concept_name": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "amount": {
                        "description": "Monto total del concepto",
                        "type": "string",
                        "example": "1500.00"
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "completed"
                    },
                    "created_at_human": {
                        "description": "Fecha de creación en formato humano relativo (generado con diffForHumans)",
                        "type": "string",
                        "example": "hace 2 días"
                    },
                    "has_pending_amount": {
                        "description": "Indica si hay monto pendiente de pago",
                        "type": "boolean",
                        "example": false
                    },
                    "balance": {
                        "description": "Saldo pendiente o sobrante. Positivo = saldo a favor, Negativo = pendiente por pagar, 'N/A' = pagado completo",
                        "type": "string",
                        "example": "N/A",
                        "nullable": true
                    },
                    "payment_method_details": {
                        "description": "Detalles del método de pago utilizado (objeto JSON)",
                        "properties": {
                            "type": {
                                "type": "string",
                                "example": "card"
                            },
                            "brand": {
                                "type": "string",
                                "example": "visa"
                            },
                            "last4": {
                                "type": "string",
                                "example": "4242"
                            }
                        },
                        "type": "object",
                        "nullable": true
                    },
                    "amount_received": {
                        "description": "Monto efectivamente recibido",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "reference": {
                        "description": "ID de referencia del pago (ej: payment_intent_id de Stripe)",
                        "type": "string",
                        "example": "pi_123456789",
                        "nullable": true
                    },
                    "url": {
                        "description": "URL del recibo o comprobante de pago",
                        "type": "string",
                        "example": "https://example.com/receipt/123",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentValidateResponse": {
                "properties": {
                    "student": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserDataResponse"
                            }
                        ],
                        "nullable": true
                    },
                    "payment": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/PaymentDataResponse"
                            }
                        ],
                        "nullable": true
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-12 14:45:00"
                    },
                    "metadata": {
                        "properties": {
                            "wasCreated": {
                                "type": "boolean",
                                "example": true
                            },
                            "wasReconciled": {
                                "type": "boolean",
                                "example": false
                            },
                            "message": {
                                "type": "string",
                                "example": "Pago creado con exito"
                            },
                            "reconciliationResult": {
                                "properties": {
                                    "processed": {
                                        "type": "integer",
                                        "example": 0
                                    },
                                    "updated": {
                                        "type": "integer",
                                        "example": 0
                                    },
                                    "notified": {
                                        "type": "integer",
                                        "example": 0
                                    },
                                    "failed": {
                                        "type": "integer",
                                        "example": 0
                                    }
                                },
                                "type": "object",
                                "nullable": true
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "PaymentsMadeByConceptName": {
                "properties": {
                    "concept_name": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "amount_total": {
                        "description": "Monto total que debe recibir ese concepto",
                        "type": "string",
                        "example": "1500.00"
                    },
                    "amount_received_total": {
                        "description": "Monto total pagado del concepto",
                        "type": "string",
                        "example": "1500.00"
                    },
                    "first_payment_date": {
                        "description": "Primera fecha de pago del concepto",
                        "type": "string",
                        "example": "2025-11-04"
                    },
                    "last_payment_date": {
                        "description": "Última fecha de pago del concepto",
                        "type": "string",
                        "example": "2025-12-04"
                    },
                    "collection_rate": {
                        "description": "Tasa de recaudación del concepto",
                        "type": "string",
                        "example": "100.00"
                    }
                },
                "type": "object"
            },
            "PaymentsSummaryResponse": {
                "properties": {
                    "totalPayments": {
                        "description": "Monto total de pagos realizados por el alumno",
                        "type": "string",
                        "example": "25000.00"
                    },
                    "paymentsByMonth": {
                        "description": "Pagos realizados por el alumno agrupados por mes (YYYY-MM)",
                        "type": "object",
                        "example": {
                            "2024-01": "15000.00",
                            "2024-02": "12000.00",
                            "2024-03": "18000.00"
                        },
                        "additionalProperties": {
                            "type": "string",
                            "example": "15000.00",
                            "property": null
                        }
                    }
                },
                "type": "object"
            },
            "StudentDetailDTO": {
                "description": "Información detallada del estudiante",
                "properties": {
                    "nControl": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "191240001",
                        "nullable": true
                    },
                    "semestre": {
                        "description": "Semestre actual del estudiante",
                        "type": "integer",
                        "example": 8,
                        "nullable": true
                    },
                    "group": {
                        "description": "Grupo al que pertenece el estudiante",
                        "type": "string",
                        "example": "8A",
                        "nullable": true
                    },
                    "workshop": {
                        "description": "Taller al que pertenece el estudiante",
                        "type": "string",
                        "example": "Dibujo",
                        "nullable": true
                    },
                    "careerName": {
                        "description": "Nombre de la carrera del estudiante",
                        "type": "string",
                        "example": "Ingeniería en Sistemas Computacionales",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserAuthResponse": {
                "description": "Representa un usuario del sistema",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "curp": {
                        "type": "string",
                        "example": "PEMJ950615HDFRZN09"
                    },
                    "name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "type": "string",
                        "example": "hashed_password"
                    },
                    "phone_number": {
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "status": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserStatus"
                            }
                        ],
                        "nullable": true,
                        "example": "activo"
                    },
                    "registration_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T12:34:56Z",
                        "nullable": true
                    },
                    "emailVerifiedAt": {
                        "description": "Indica si el correo del usuario ya ha sido verificado y cuando",
                        "type": "string",
                        "example": "2024-01-15T12:34:56Z"
                    },
                    "birthdate": {
                        "type": "string",
                        "format": "date",
                        "example": "1995-06-15",
                        "nullable": true
                    },
                    "gender": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserGender"
                            }
                        ],
                        "nullable": true,
                        "example": "male"
                    },
                    "address": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Calle Falsa 123",
                            "Colonia Centro"
                        ],
                        "nullable": true
                    },
                    "stripe_customer_id": {
                        "type": "string",
                        "example": "cus_ABC123XYZ",
                        "nullable": true
                    },
                    "blood_type": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserBloodType"
                            }
                        ],
                        "nullable": true,
                        "example": "O+"
                    }
                },
                "type": "object"
            },
            "UserChangedStatusResponse": {
                "description": "Respuesta después de cambiar el estado de uno o más usuarios",
                "properties": {
                    "newStatus": {
                        "description": "Nuevo estado asignado a los usuarios",
                        "type": "string",
                        "example": "activo"
                    },
                    "totalUpdated": {
                        "description": "Número total de usuarios actualizados",
                        "type": "integer",
                        "example": 5
                    }
                },
                "type": "object"
            },
            "UserDataResponse": {
                "properties": {
                    "id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "example": "juan.perez@example.com",
                        "nullable": true
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "PEPJ800101HDFRRN09",
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "2025001",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserExtraDataResponse": {
                "description": "Respuesta con información adicional detallada del usuario",
                "properties": {
                    "userId": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 45
                    },
                    "basicInfo": {
                        "description": "Información básica adicional del usuario",
                        "properties": {
                            "phone_number": {
                                "description": "Número de teléfono",
                                "type": "string",
                                "example": "+5215512345678"
                            },
                            "birthdate": {
                                "description": "Fecha de nacimiento en formato YYYY-MM-DD",
                                "type": "string",
                                "format": "date",
                                "example": "1995-03-15"
                            },
                            "age": {
                                "description": "Edad calculada a partir de la fecha de nacimiento",
                                "type": "integer",
                                "example": 28
                            },
                            "address": {
                                "description": "Dirección del usuario",
                                "type": "string",
                                "example": "Calle Principal #123, Col. Centro, CDMX"
                            },
                            "blood_type": {
                                "description": "Tipo de sangre",
                                "type": "string",
                                "example": "O+"
                            },
                            "registration_date": {
                                "description": "Fecha de registro del usuario en formato YYYY-MM-DD",
                                "type": "string",
                                "format": "date",
                                "example": "2023-01-15"
                            }
                        },
                        "type": "object"
                    },
                    "roles": {
                        "description": "Roles asignados al usuario",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "example": "student"
                        }
                    },
                    "permissions": {
                        "description": "Permisos directos del usuario",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "example": "view_grades"
                        }
                    },
                    "studentDetail": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/StudentDetailDTO"
                            }
                        ],
                        "nullable": true,
                        "description": "Información detallada del estudiante (solo si es estudiante)"
                    }
                },
                "type": "object"
            },
            "UserIdListDTO": {
                "properties": {
                    "userIds": {
                        "description": "Lista de IDs de usuario",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserListItemResponse": {
                "description": "Respuesta con información básica de usuario para listados",
                "properties": {
                    "id": {
                        "description": "ID único del usuario",
                        "type": "integer",
                        "example": 1
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario (nombre + apellido)",
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "EXMP050408HMSPXNA9"
                    },
                    "status": {
                        "description": "Estado del usuario",
                        "type": "string",
                        "enum": [
                            "active",
                            "inactive",
                            "pending",
                            "suspended"
                        ],
                        "example": "active"
                    },
                    "roles_count": {
                        "description": "Cantidad de roles asignados al usuario",
                        "type": "integer",
                        "minimum": 0,
                        "example": 2
                    },
                    "createdAtHuman": {
                        "description": "Fecha de creación en formato humano relativo",
                        "type": "string",
                        "example": "hace 2 horas"
                    },
                    "deletedAtHuman": {
                        "description": "Dias que faltan para ser eliminado",
                        "type": "integer",
                        "example": 2
                    }
                },
                "type": "object"
            },
            "UserRecipientDTO": {
                "properties": {
                    "id": {
                        "description": "ID del usuario destinatario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del destinatario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "email": {
                        "description": "Correo electrónico del destinatario",
                        "type": "string",
                        "example": "juan.perez@example.com",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithPaymentResponse": {
                "properties": {
                    "id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "concept": {
                        "description": "Nombre del concepto asociado al pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithPendingSumamaryResponse": {
                "properties": {
                    "userId": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Numero de control del alumno",
                        "type": "string",
                        "example": "2196023",
                        "nullable": true
                    },
                    "semestre": {
                        "description": "Semestre del estudiante",
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "career_name": {
                        "description": "Nombre de la carrera del estudiante",
                        "type": "string",
                        "example": "Ingeniería en Sistemas",
                        "nullable": true
                    },
                    "num_pending": {
                        "description": "Número de conceptos pendientes",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    },
                    "num_expired": {
                        "description": "Número de conceptos vencidos",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "total_amount_pending": {
                        "description": "Monto total pendiente",
                        "type": "string",
                        "example": "4500.00",
                        "nullable": true
                    },
                    "total_paid": {
                        "description": "Monto total pagado",
                        "type": "string",
                        "example": "7500.00",
                        "nullable": true
                    },
                    "expired_amount": {
                        "description": "Monto total expirado",
                        "type": "string",
                        "example": "500.00",
                        "nullable": true
                    },
                    "num_paid": {
                        "description": "Número de conceptos pagados",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithUpdatedPermissionsResponse": {
                "description": "Respuesta de una operación masiva de actualización de permisos sobre usuarios",
                "properties": {
                    "summary": {
                        "description": "Resumen global de la operación",
                        "properties": {
                            "totalFound": {
                                "description": "Total de usuarios encontrados",
                                "type": "integer",
                                "example": 30
                            },
                            "totalUpdated": {
                                "description": "Total de usuarios actualizados",
                                "type": "integer",
                                "example": 20
                            },
                            "totalUnchanged": {
                                "description": "Total de usuarios sin cambios",
                                "type": "integer",
                                "example": 5
                            },
                            "totalFailed": {
                                "description": "Total de usuarios que fallaron",
                                "type": "integer",
                                "example": 5
                            },
                            "operations": {
                                "description": "Operaciones realizadas",
                                "properties": {
                                    "total_permissions_removed": {
                                        "description": "Total de permisos removidos",
                                        "type": "integer",
                                        "example": 15
                                    },
                                    "total_permissions_added": {
                                        "description": "Total de permisos agregados",
                                        "type": "integer",
                                        "example": 10
                                    },
                                    "total_roles_processed": {
                                        "description": "Total de roles procesados",
                                        "type": "integer",
                                        "example": 3
                                    }
                                },
                                "type": "object"
                            }
                        },
                        "type": "object"
                    },
                    "users": {
                        "description": "Detalle de usuarios procesados",
                        "properties": {
                            "processed_users_id": {
                                "description": "IDs de primeros 10 usuarios procesados exitosamente",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "affected_users_id": {
                                "description": "IDs de primeros 10 usuarios procesados exitosamente",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "failed_users_id": {
                                "description": "IDs de usuarios que fallaron",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    4,
                                    5
                                ]
                            },
                            "unchanged_users_id": {
                                "description": "IDs de usuarios que no tuvieron cambios",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    6,
                                    7
                                ]
                            }
                        },
                        "type": "object"
                    },
                    "permissionsProcessed": {
                        "description": "Permisos procesados durante la operación",
                        "properties": {
                            "processed_added": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "view.students",
                                    "edit.students"
                                ]
                            },
                            "processed_removed": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "create.student"
                                ]
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "UserWithUpdatedRoleResponse": {
                "description": "Respuesta con los roles actualizados de varios usuarios",
                "properties": {
                    "summary": {
                        "description": "Resumen global de la operación",
                        "properties": {
                            "totalFound": {
                                "description": "Total de usuarios encontrados",
                                "type": "integer",
                                "example": 30
                            },
                            "totalUpdated": {
                                "description": "Total de usuarios actualizados",
                                "type": "integer",
                                "example": 20
                            },
                            "totalUnchanged": {
                                "description": "Total de usuarios sin cambios",
                                "type": "integer",
                                "example": 5
                            },
                            "totalFailed": {
                                "description": "Total de usuarios que fallaron",
                                "type": "integer",
                                "example": 5
                            },
                            "operations": {
                                "description": "Operaciones realizadas",
                                "properties": {
                                    "total_roles_removed": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "student"
                                        ]
                                    },
                                    "total_roles_added": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "guest"
                                        ]
                                    },
                                    "total_chunks_processed": {
                                        "type": "integer",
                                        "example": 5
                                    }
                                },
                                "type": "object"
                            }
                        },
                        "type": "object"
                    },
                    "users": {
                        "description": "Detalle de usuarios procesados",
                        "properties": {
                            "processed_users_id": {
                                "description": "IDs de primeros 10 usuarios procesados exitosamente",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "affected_users_id": {
                                "description": "IDs de primeros 10 usuarios procesados exitosamente",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "unchanged_users_id": {
                                "description": "IDs de usuarios que no tuvieron cambios",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    4,
                                    5
                                ]
                            },
                            "failed_users_id": {
                                "description": "IDs de usuarios que fallaron",
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                },
                                "example": [
                                    6,
                                    7
                                ]
                            }
                        },
                        "type": "object"
                    },
                    "rolesProcessed": {
                        "description": "Roles agregados y removidos",
                        "properties": {
                            "processed_added": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "student"
                                ]
                            },
                            "processed_removed": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "example": [
                                    "guest"
                                ]
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "UsersAdminSummary": {
                "title": "UsersAdminSummary",
                "description": "Resumen administrativo de usuarios para el dashboard",
                "properties": {
                    "populationSummary": {
                        "description": "Estadísticas generales de los usuarios",
                        "properties": {
                            "total_users": {
                                "type": "integer",
                                "example": 1200
                            },
                            "active_users": {
                                "type": "integer",
                                "example": 900
                            },
                            "inactive_users": {
                                "type": "integer",
                                "example": 200
                            },
                            "temporal_inactive_users": {
                                "type": "integer",
                                "example": 50
                            },
                            "deleted_users": {
                                "type": "integer",
                                "example": 50
                            }
                        },
                        "type": "object"
                    },
                    "usersByRoleSummary": {
                        "description": "Cantidad de usuarios por cada rol",
                        "type": "object",
                        "example": {
                            "Admin": 10,
                            "Student": 500,
                            "Teacher": 100
                        }
                    },
                    "academicSummary": {
                        "description": "Resumen académico de los estudiantes",
                        "properties": {
                            "students_total": {
                                "type": "integer",
                                "example": 500
                            },
                            "students_with_career": {
                                "type": "integer",
                                "example": 450
                            },
                            "students_without_career": {
                                "type": "integer",
                                "example": 50
                            },
                            "students_without_semester": {
                                "type": "integer",
                                "example": 20
                            },
                            "students_without_group": {
                                "type": "integer",
                                "example": 15
                            }
                        },
                        "type": "object"
                    },
                    "systemAlerts": {
                        "description": "Alertas del sistema relacionadas con usuarios y estudiantes",
                        "properties": {
                            "users_without_role": {
                                "type": "integer",
                                "example": 5
                            },
                            "students_without_n_control": {
                                "type": "integer",
                                "example": 30
                            },
                            "students_without_student_details": {
                                "type": "integer",
                                "example": 10
                            }
                        },
                        "type": "object"
                    },
                    "recentActivity": {
                        "description": "Actividad reciente de usuarios",
                        "properties": {
                            "new_users_today": {
                                "type": "integer",
                                "example": 3
                            },
                            "new_users_this_week": {
                                "type": "integer",
                                "example": 20
                            },
                            "new_users_this_month": {
                                "type": "integer",
                                "example": 70
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "UsersFinancialSummary": {
                "title": "UsersFinancialSummary",
                "description": "Resumen financiero de usuarios",
                "properties": {
                    "totalStudents": {
                        "description": "Número total de estudiantes registrados",
                        "type": "integer",
                        "example": 500
                    },
                    "totalApplicants": {
                        "description": "Número total de solicitantes",
                        "type": "integer",
                        "example": 120
                    }
                },
                "type": "object"
            },
            "DomainCareer": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "career_name": {
                        "type": "string",
                        "example": "Matematicas"
                    }
                },
                "type": "object"
            },
            "ParentInvite": {
                "required": [
                    "studentId",
                    "email",
                    "token",
                    "expiresAt",
                    "createdBy"
                ],
                "properties": {
                    "studentId": {
                        "type": "integer"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "token": {
                        "type": "string"
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "createdBy": {
                        "type": "integer"
                    },
                    "id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "usedAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ParentStudent": {
                "required": [
                    "parentId",
                    "studentId",
                    "parentRoleId",
                    "studentRoleId"
                ],
                "properties": {
                    "parentId": {
                        "type": "integer"
                    },
                    "studentId": {
                        "type": "integer"
                    },
                    "parentRoleId": {
                        "type": "integer"
                    },
                    "studentRoleId": {
                        "type": "integer"
                    },
                    "relationship": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/RelationshipType"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainPayment": {
                "description": "Representa un pago realizado por un usuario",
                "properties": {
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500",
                        "nullable": true
                    },
                    "status": {
                        "$ref": "#/components/schemas/PaymentStatus"
                    },
                    "payment_method_details": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Tarjeta de crédito",
                            "Banco XYZ"
                        ],
                        "nullable": true
                    },
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "payment_concept_id": {
                        "type": "integer",
                        "example": 45,
                        "nullable": true
                    },
                    "payment_method_id": {
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "stripe_payment_method_id": {
                        "type": "string",
                        "example": "pm_1Hh1Xx2eZvKYlo2Cj1234567",
                        "nullable": true
                    },
                    "amount_received": {
                        "type": "string",
                        "example": "1500",
                        "nullable": true
                    },
                    "payment_intent_id": {
                        "type": "string",
                        "example": "pi_1Hh1Xx2eZvKYlo2Cd1234567",
                        "nullable": true
                    },
                    "url": {
                        "type": "string",
                        "example": "https://checkout.stripe.com/pay/cs_test_a1b2c3d4",
                        "nullable": true
                    },
                    "stripe_session_id": {
                        "type": "string",
                        "example": "cs_test_a1b2c3d4",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainPaymentConcept": {
                "description": "Representa un concepto de pago",
                "properties": {
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "status": {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01"
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "applies_to": {
                        "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                    },
                    "userIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "careerIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ]
                    },
                    "semesters": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "exceptionUserIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "applicantTags": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PaymentConceptApplicantType"
                        }
                    },
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainPaymentMethod": {
                "description": "Método de pago de un usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "stripe_payment_method_id": {
                        "type": "string",
                        "example": "pm_1Hh1Xx2eZvKYlo2Cj1234567"
                    },
                    "brand": {
                        "type": "string",
                        "example": "Visa",
                        "nullable": true
                    },
                    "last4": {
                        "type": "string",
                        "example": "4242",
                        "nullable": true
                    },
                    "exp_month": {
                        "type": "string",
                        "example": "12",
                        "nullable": true
                    },
                    "exp_year": {
                        "type": "string",
                        "example": "2027",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Permission": {
                "title": "Permission",
                "description": "Representa un permiso dentro del sistema.",
                "properties": {
                    "id": {
                        "description": "Identificador único del permiso.",
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "description": "Nombre del permiso.",
                        "type": "string",
                        "example": "edit users"
                    },
                    "type": {
                        "description": "Tipo de permiso.",
                        "type": "string",
                        "example": "model"
                    }
                },
                "type": "object"
            },
            "DomainRefreshToken": {
                "description": "Representa un token de actualización para un usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "token": {
                        "type": "string",
                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-04T23:59:59Z"
                    },
                    "revoked": {
                        "type": "boolean",
                        "example": false
                    }
                },
                "type": "object"
            },
            "Role": {
                "title": "Role",
                "description": "Representa un rol dentro del sistema.",
                "properties": {
                    "id": {
                        "description": "Identificador único del rol.",
                        "type": "integer",
                        "example": 2
                    },
                    "name": {
                        "description": "Nombre del rol.",
                        "type": "string",
                        "example": "Administrator"
                    }
                },
                "type": "object"
            },
            "DomainStudentDetail": {
                "description": "Detalles del estudiante",
                "properties": {
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "career_id": {
                        "type": "integer",
                        "example": 10,
                        "nullable": true
                    },
                    "n_control": {
                        "type": "string",
                        "example": "20201234",
                        "nullable": true
                    },
                    "semestre": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "group": {
                        "type": "string",
                        "example": "A",
                        "nullable": true
                    },
                    "workshop": {
                        "type": "string",
                        "example": "Taller de programación",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainUser": {
                "description": "Representa un usuario del sistema",
                "properties": {
                    "curp": {
                        "type": "string",
                        "example": "PEMJ950615HDFRZN09"
                    },
                    "name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "type": "string",
                        "example": "hashed_password"
                    },
                    "phone_number": {
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "status": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserStatus"
                            }
                        ],
                        "nullable": true,
                        "example": "activo"
                    },
                    "registration_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T12:34:56Z",
                        "nullable": true
                    },
                    "emailVerified": {
                        "description": "Indica si el correo del usuario ya ha sido verificado",
                        "type": "boolean"
                    },
                    "roles": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Role"
                        },
                        "nullable": true
                    },
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "birthdate": {
                        "type": "string",
                        "format": "date",
                        "example": "1995-06-15",
                        "nullable": true
                    },
                    "gender": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserGender"
                            }
                        ],
                        "nullable": true,
                        "example": "male"
                    },
                    "address": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Calle Falsa 123",
                            "Colonia Centro"
                        ],
                        "nullable": true
                    },
                    "stripe_customer_id": {
                        "type": "string",
                        "example": "cus_ABC123XYZ",
                        "nullable": true
                    },
                    "blood_type": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserBloodType"
                            }
                        ],
                        "nullable": true,
                        "example": "O+"
                    },
                    "studentDetail": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/DomainStudentDetail"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ErrorCode": {
                "description": "Códigos de error estandarizados del sistema",
                "type": "string",
                "enum": [
                    "UNAUTHENTICATED",
                    "ACCESS_TOKEN_EXPIRED",
                    "FORBIDDEN",
                    "DUPLICATE_ENTRY",
                    "DATABASE_ERROR",
                    "NOT_FOUND",
                    "BAD_REQUEST",
                    "INVALID_ARGUMENT",
                    "CARD_ERROR",
                    "RATE_LIMIT_EXCEEDED",
                    "TOO_MANY_REQUESTS",
                    "STRIPE_API_ERROR",
                    "VALIDATION_ERROR",
                    "INTERNAL_SERVER_ERROR",
                    "STRIPE_GATEWAY_ERROR",
                    "IDEMPOTENCY_EXISTS_EXCEPTION",
                    "IDEMPOTENCY_TIMEOUT_EXCEPTION",
                    "CONCEPT_ALREADY_ACTIVE",
                    "CONCEPT_ALREADY_DELETED",
                    "CONCEPT_ALREADY_DISABLED",
                    "CONCEPT_ALREADY_FINALIZED",
                    "CONCEPT_APPLIES_TO_CONFLICT",
                    "CONCEPT_CANNOT_BE_DISABLED",
                    "CONCEPT_CANNOT_BE_FINALIZED",
                    "CONCEPT_CANNOT_BE_UPDATED",
                    "CONCEPT_CONFLICT_STATUS",
                    "PAYMENT_ALREADY_EXISTS",
                    "PROMOTION_ALREADY_EXECUTED",
                    "RELATION_ALREADY_EXISTS",
                    "STUDENTS_AND_EXCEPTIONS_OVERLAP",
                    "USER_ALREADY_ACTIVE",
                    "USER_ALREADY_DELETED",
                    "USER_ALREADY_DISABLED",
                    "USER_ALREADY_HAVE_STUDENT_DETAIL",
                    "USER_CANNOT_BE_DISABLED",
                    "USER_CANNOT_BE_UPDATED",
                    "USER_CONFLICT_STATUS",
                    "USER_EXPLICITLY_EXCLUDED",
                    "REMOVE_EXCEPTIONS_AND_EXCEPTION_STUDENT_OVERLAP",
                    "ADMIN_ROLE_NOT_ALLOWED",
                    "INVALID_CURRENT_PASSWORD",
                    "INVALID_INVITATION",
                    "PAYMENT_RETRY_NOT_ALLOWED",
                    "PROMOTION_NOT_ALLOWED",
                    "USER_INVALID_ROLE",
                    "USER_NOT_ALLOWED",
                    "NOT_ALLOWED",
                    "CAREERS_NOT_FOUND",
                    "CONCEPT_NOT_FOUND",
                    "EXCEPTION_STUDENTS_NOT_FOUND",
                    "PARENT_CHILDREN_NOT_FOUND",
                    "PAYMENT_METHOD_NOT_FOUND",
                    "PAYMENT_NOT_FOUND",
                    "PERMISSION_NOT_FOUND",
                    "PERMISSIONS_BY_USER_NOT_FOUND",
                    "RECIPIENTS_NOT_FOUND",
                    "ROLE_NOT_FOUND",
                    "STUDENT_DETAIL_NOT_FOUND",
                    "STUDENTS_NOT_FOUND",
                    "USER_NOT_FOUND",
                    "USERS_NOT_FOUND_FOR_UPDATE",
                    "STUDENT_PARENTS_NOT_FOUND",
                    "PAYMENT_NOTIFICATION_ERROR",
                    "PAYMENT_RECONCILIATION_ERROR",
                    "STRIPE_CHECKOUT_SESSION_ERROR",
                    "INVALID_CREDENTIALS",
                    "INVALID_REFRESH_TOKEN",
                    "REFRESH_TOKEN_EXPIRED",
                    "REFRESH_TOKEN_REVOKED",
                    "USER_INACTIVE",
                    "APPLICANT_TAG_INVALID",
                    "CAREER_SEMESTER_INVALID",
                    "CONCEPT_END_DATE_BEFORE_START",
                    "CONCEPT_END_DATE_BEFORE_TODAY",
                    "CONCEPT_END_DATE_TOO_FAR",
                    "CONCEPT_EXPIRED",
                    "CONCEPT_INACTIVE",
                    "CONCEPT_INVALID_AMOUNT",
                    "CONCEPT_INVALID_END_DATE",
                    "CONCEPT_INVALID_START_DATE",
                    "CONCEPT_MISSING_NAME",
                    "CONCEPT_NOT_STARTED",
                    "CONCEPT_START_DATE_TOO_EARLY",
                    "CONCEPT_START_DATE_TOO_FAR",
                    "PAYMENT_METHOD_NOT_SUPPORTED",
                    "SEMESTERS_NOT_FOUND",
                    "PAYOUT_VALIDATION",
                    "REQUIRED_FOR_APPLIES_TO",
                    "PAYMENT_IS_NOT_PAID",
                    "METHOD_NOT_ALLOWED",
                    "PAYLOAD_TOO_LARGE",
                    "SERVICE_UNAVAILABLE"
                ],
                "example": "VALIDATION_ERROR"
            },
            "PaymentConceptApplicantType": {
                "description": "Tags de casos especiales",
                "type": "string",
                "enum": [
                    "applicant",
                    "no_student_details"
                ],
                "example": "applicant"
            },
            "PaymentConceptAppliesTo": {
                "description": "A quien aplica el concepto de pago",
                "type": "string",
                "enum": [
                    "todos",
                    "carrera",
                    "semestre",
                    "carrera_semestre",
                    "estudiantes",
                    "tag"
                ],
                "example": "todos"
            },
            "PaymentConceptStatus": {
                "description": "Estatus válidos de un concepto de pago",
                "type": "string",
                "enum": [
                    "activo",
                    "finalizado",
                    "desactivado",
                    "eliminado"
                ],
                "example": "activo"
            },
            "PaymentStatus": {
                "description": "Estatus válidos de un pago",
                "type": "string",
                "enum": [
                    "succeeded",
                    "overpaid",
                    "failed",
                    "paid",
                    "requires_action",
                    "unpaid",
                    "pending",
                    "underpaid"
                ],
                "example": "paid"
            },
            "RelationshipType": {
                "description": "Tipo de relación entre padre y estudiante",
                "type": "string",
                "enum": [
                    "padre",
                    "madre",
                    "tutor",
                    "tutor_legal"
                ],
                "example": "padre"
            },
            "UserBloodType": {
                "description": "Tipos de sangre válidos de un usuario",
                "type": "string",
                "enum": [
                    "O+",
                    "O-",
                    "A+",
                    "A-",
                    "B+",
                    "B-",
                    "AB+",
                    "AB-"
                ],
                "example": "O+"
            },
            "UserGender": {
                "description": "Generos válidos de un usuario",
                "type": "string",
                "enum": [
                    "hombre",
                    "mujer"
                ],
                "example": "hombre"
            },
            "UserStatus": {
                "description": "Estatus valido de un usuario",
                "type": "string",
                "enum": [
                    "activo",
                    "baja-temporal",
                    "baja",
                    "eliminado"
                ],
                "example": "activo"
            },
            "AttachStudentRequest": {
                "required": [
                    "user_id",
                    "career_id",
                    "n_control",
                    "semestre",
                    "group",
                    "workshop"
                ],
                "properties": {
                    "user_id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 4
                    },
                    "career_id": {
                        "description": "ID de la carrera",
                        "type": "integer",
                        "example": 1
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "2578900"
                    },
                    "semestre": {
                        "description": "Semestre actual del estudiante",
                        "type": "integer",
                        "example": 1
                    },
                    "group": {
                        "description": "Grupo del estudiante",
                        "type": "string",
                        "example": "A"
                    },
                    "workshop": {
                        "description": "Taller asignado al estudiante",
                        "type": "string",
                        "example": "Dibujo"
                    }
                },
                "type": "object"
            },
            "ChangeUserStatusRequest": {
                "required": [
                    "ids"
                ],
                "properties": {
                    "ids": {
                        "description": "Array de IDs de los usuarios a cambiar de estado",
                        "type": "array",
                        "items": {
                            "description": "ID de un usuario existente",
                            "type": "integer",
                            "example": 1
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    }
                },
                "type": "object"
            },
            "FindPermissionsByCurpsRequest": {
                "properties": {
                    "curps": {
                        "description": "Array de CURPs de los usuarios a consultar permisos",
                        "type": "array",
                        "items": {
                            "description": "CURP de un usuario existente",
                            "type": "string",
                            "example": "LOPA800101HDFRNL09"
                        },
                        "example": [
                            "LOPA800101HDFRNL09",
                            "MARA900202MDFRTN05"
                        ]
                    }
                },
                "type": "object"
            },
            "FindPermissionsByRoleRequest": {
                "properties": {
                    "role": {
                        "description": "Nombre del rol para consultar permisos",
                        "type": "string",
                        "example": "student"
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "FindPermissionsToUserRequest": {
                "properties": {
                    "roles": {
                        "description": "Array de roles del usuario a consultar permisos",
                        "type": "array",
                        "items": {
                            "description": "Rol de un usuario existente",
                            "type": "string",
                            "example": "parent"
                        },
                        "example": [
                            "financial-staff",
                            "parent"
                        ]
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "RegisterUserRequest": {
                "required": [
                    "name",
                    "last_name",
                    "email",
                    "phone_number",
                    "curp",
                    "status"
                ],
                "properties": {
                    "name": {
                        "description": "Nombre del usuario",
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "description": "Apellido del usuario",
                        "type": "string",
                        "example": "Pérez López"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "phone_number": {
                        "description": "Número de teléfono del usuario",
                        "type": "string",
                        "example": "5512345678"
                    },
                    "birthdate": {
                        "description": "Fecha de nacimiento del usuario (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2000-05-12"
                    },
                    "gender": {
                        "$ref": "#/components/schemas/UserGender"
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "LOPA800101HDFRNL09"
                    },
                    "address": {
                        "description": "Dirección del usuario",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Calle Hidalgo #123",
                            "Col. Centro",
                            "CDMX"
                        ]
                    },
                    "blood_type": {
                        "$ref": "#/components/schemas/UserBloodType"
                    },
                    "registration_date": {
                        "description": "Fecha de registro del usuario (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-01"
                    },
                    "status": {
                        "$ref": "#/components/schemas/UserStatus"
                    }
                },
                "type": "object"
            },
            "ShowUsersPaginationRequest": {
                "properties": {
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean"
                    },
                    "only_this_year": {
                        "description": "Indica si se debe mostrar datos de este año o de todos (opcional, aplica solo en Dashboard)",
                        "type": "boolean"
                    },
                    "perPage": {
                        "description": "Número de elementos por página (opcional, entre 1 y 200)",
                        "type": "integer",
                        "maximum": 200,
                        "minimum": 1,
                        "example": 20
                    },
                    "page": {
                        "description": "Número de página (opcional, mínimo 1)",
                        "type": "integer",
                        "minimum": 1,
                        "example": 1
                    },
                    "status": {
                        "$ref": "#/components/schemas/UserStatus"
                    }
                },
                "type": "object"
            },
            "UpdatePermissionsRequest": {
                "properties": {
                    "curps": {
                        "description": "Array de CURPs de los usuarios a actualizar permisos (opcional, no enviar si se usa role)",
                        "type": "array",
                        "items": {
                            "description": "CURP de un usuario existente",
                            "type": "string",
                            "example": "GODE561231HDFABC09"
                        },
                        "example": [
                            "GODE561231HDFABC09",
                            "PEMJ800101MDFLRS08"
                        ]
                    },
                    "role": {
                        "description": "Nombre del rol cuyos permisos se actualizarán (opcional, no enviar si se usan curps)",
                        "type": "string",
                        "example": "admin"
                    },
                    "permissionsToAdd": {
                        "description": "Array de nombres de permisos a agregar",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un permiso existente",
                            "type": "string",
                            "example": "users.create"
                        },
                        "example": [
                            "users.create",
                            "reports.view"
                        ]
                    },
                    "permissionsToRemove": {
                        "description": "Array de nombres de permisos a remover",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un permiso existente",
                            "type": "string",
                            "example": "users.delete"
                        },
                        "example": [
                            "users.delete",
                            "settings.update"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdatePermissionsToUserRequest": {
                "properties": {
                    "permissionsToAdd": {
                        "description": "Array de nombres de permisos a agregar",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un permiso existente",
                            "type": "string",
                            "example": "users.create"
                        },
                        "example": [
                            "users.create",
                            "reports.view"
                        ]
                    },
                    "permissionsToRemove": {
                        "description": "Array de nombres de permisos a remover",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un permiso existente",
                            "type": "string",
                            "example": "users.delete"
                        },
                        "example": [
                            "users.delete",
                            "settings.update"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdateRolesRequest": {
                "required": [
                    "curps"
                ],
                "properties": {
                    "curps": {
                        "description": "Array de CURPs de los usuarios a actualizar roles",
                        "type": "array",
                        "items": {
                            "description": "CURP de un usuario existente",
                            "type": "string",
                            "example": "GODE561231HDFABC09"
                        },
                        "example": [
                            "GODE561231HDFABC09",
                            "PEMJ800101MDFLRS08"
                        ]
                    },
                    "rolesToAdd": {
                        "description": "Array de nombres de roles a agregar",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un rol existente",
                            "type": "string",
                            "example": "editor"
                        },
                        "example": [
                            "editor",
                            "supervisor"
                        ]
                    },
                    "rolesToRemove": {
                        "description": "Array de nombres de roles a remover",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un rol existente",
                            "type": "string",
                            "example": "viewer"
                        },
                        "example": [
                            "viewer",
                            "assistant"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdateRolesToUserRequest": {
                "required": [
                    "curps"
                ],
                "properties": {
                    "rolesToAdd": {
                        "description": "Array de nombres de roles a agregar",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un rol existente",
                            "type": "string",
                            "example": "editor"
                        },
                        "example": [
                            "editor",
                            "supervisor"
                        ]
                    },
                    "rolesToRemove": {
                        "description": "Array de nombres de roles a remover",
                        "type": "array",
                        "items": {
                            "description": "Nombre de un rol existente",
                            "type": "string",
                            "example": "viewer"
                        },
                        "example": [
                            "viewer",
                            "assistant"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdateStudentRequest": {
                "properties": {
                    "career_id": {
                        "description": "ID de la carrera",
                        "type": "integer",
                        "example": 1
                    },
                    "group": {
                        "description": "Grupo del estudiante",
                        "type": "string",
                        "example": "A"
                    },
                    "workshop": {
                        "description": "Taller asignado al estudiante",
                        "type": "string",
                        "example": "Dibujo"
                    }
                },
                "type": "object"
            },
            "LoginRequest": {
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "usuario@dominio.com"
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "example": "secret123"
                    }
                },
                "type": "object"
            },
            "RegisterRequest": {
                "required": [
                    "name",
                    "last_name",
                    "email",
                    "password",
                    "phone_number",
                    "curp",
                    "status"
                ],
                "properties": {
                    "name": {
                        "description": "Nombre del usuario",
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "description": "Apellido del usuario",
                        "type": "string",
                        "example": "Pérez López"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "description": "Contraseña del usuario",
                        "type": "string",
                        "example": "SecretPass123"
                    },
                    "phone_number": {
                        "description": "Número de teléfono del usuario",
                        "type": "string",
                        "example": "+52 5512345678"
                    },
                    "birthdate": {
                        "description": "Fecha de nacimiento del usuario (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "1990-05-12"
                    },
                    "gender": {
                        "$ref": "#/components/schemas/UserGender"
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "GODE561231HDFABC09"
                    },
                    "address": {
                        "description": "Dirección del usuario",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "example": "Calle Falsa 123, Col. Centro, CDMX"
                        },
                        "example": [
                            "Calle Falsa 123",
                            "Col. Centro",
                            "Ciudad de México"
                        ]
                    },
                    "blood_type": {
                        "$ref": "#/components/schemas/UserBloodType"
                    },
                    "registration_date": {
                        "description": "Fecha de registro del usuario (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                    },
                    "status": {
                        "$ref": "#/components/schemas/UserStatus"
                    }
                },
                "type": "object"
            },
            "CreateCareerRequest": {
                "required": [
                    "career_name"
                ],
                "properties": {
                    "career_name": {
                        "description": "Nombre de la carrera",
                        "type": "string",
                        "maxLength": 150,
                        "example": "Ofimatica"
                    }
                },
                "type": "object"
            },
            "UpdateCareerRequest": {
                "required": [
                    "career_name"
                ],
                "properties": {
                    "career_name": {
                        "description": "Nombre de la carrera",
                        "type": "string",
                        "maxLength": 50,
                        "example": "Contabilidad"
                    }
                },
                "type": "object"
            },
            "ForceRefreshRequest": {
                "properties": {
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "ImportRequest": {
                "properties": {
                    "file": {
                        "description": "Archivo con los usuarios a importar (XLSX, XLS o CSV)",
                        "type": "string",
                        "format": "binary"
                    }
                },
                "type": "object"
            },
            "PaginationRequest": {
                "properties": {
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean"
                    },
                    "only_this_year": {
                        "description": "Indica si se debe mostrar datos de este año o de todos (opcional, aplica solo en Dashboard)",
                        "type": "boolean"
                    },
                    "perPage": {
                        "description": "Número de elementos por página (opcional, entre 1 y 200)",
                        "type": "integer",
                        "maximum": 200,
                        "minimum": 1,
                        "example": 20
                    },
                    "page": {
                        "description": "Número de página (opcional, mínimo 1)",
                        "type": "integer",
                        "minimum": 1,
                        "example": 1
                    }
                },
                "type": "object"
            },
            "AcceptInviteRequest": {
                "required": [
                    "token"
                ],
                "properties": {
                    "token": {
                        "description": "Token de la invitación",
                        "type": "string",
                        "example": "abc123xyzInviteToken987"
                    },
                    "relationship": {
                        "$ref": "#/components/schemas/RelationshipType"
                    }
                },
                "type": "object"
            },
            "SendInviteRequest": {
                "required": [
                    "student_id",
                    "parent_email"
                ],
                "properties": {
                    "student_id": {
                        "description": "ID del estudiante existente",
                        "type": "integer",
                        "example": 42
                    },
                    "parent_email": {
                        "description": "Correo electrónico del padre",
                        "type": "string",
                        "format": "email",
                        "example": "parent@example.com"
                    }
                },
                "type": "object"
            },
            "AllConceptsRequest": {
                "properties": {
                    "only_this_year": {
                        "description": "Filtrar conceptos solo del año actual (opcional)",
                        "type": "boolean",
                        "example": true
                    },
                    "perPage": {
                        "description": "Número de elementos por página (opcional, entre 1 y 200)",
                        "type": "integer",
                        "maximum": 200,
                        "minimum": 1,
                        "example": 25
                    },
                    "page": {
                        "description": "Número de página (opcional, mínimo 1)",
                        "type": "integer",
                        "minimum": 1,
                        "example": 1
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean",
                        "example": false
                    }
                },
                "type": "object"
            },
            "ConceptsIndexRequest": {
                "properties": {
                    "status": {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean",
                        "example": false
                    },
                    "perPage": {
                        "description": "Número de elementos por página (opcional, entre 1 y 200)",
                        "type": "integer",
                        "maximum": 200,
                        "minimum": 1,
                        "example": 20
                    },
                    "page": {
                        "description": "Número de página (opcional, mínimo 1)",
                        "type": "integer",
                        "minimum": 1,
                        "example": 1
                    }
                },
                "type": "object"
            },
            "DashboardRequest": {
                "properties": {
                    "only_this_year": {
                        "description": "Filtrar datos solo del año actual (opcional)",
                        "type": "boolean",
                        "example": true
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "GetStripePaymentsRequest": {
                "required": [
                    "search"
                ],
                "properties": {
                    "search": {
                        "description": "CURP, email o n_control de usuario",
                        "type": "string",
                        "example": "25187109"
                    },
                    "year": {
                        "description": "Año de los pagos (opcional)",
                        "type": "integer",
                        "example": 2023
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "PaginationWithSearchRequest": {
                "properties": {
                    "search": {
                        "description": "Término de búsqueda opcional, CURP, email o N_control",
                        "type": "string",
                        "example": "25789045"
                    },
                    "perPage": {
                        "description": "Número de elementos por página (opcional, entre 1 y 200)",
                        "type": "integer",
                        "maximum": 200,
                        "minimum": 1,
                        "example": 10
                    },
                    "page": {
                        "description": "Número de página (opcional, mínimo 1)",
                        "type": "integer",
                        "minimum": 1,
                        "example": 2
                    },
                    "forceRefresh": {
                        "description": "Indica si se debe forzar la actualización (opcional)",
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "StorePaymentConceptRequest": {
                "required": [
                    "concept_name",
                    "start_date",
                    "amount",
                    "applies_to"
                ],
                "properties": {
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "maxLength": 50,
                        "example": "Inscripción 2025"
                    },
                    "description": {
                        "description": "Descripción opcional del concepto",
                        "type": "string",
                        "maxLength": 100,
                        "example": "Pago correspondiente al proceso de inscripción del ciclo 2025"
                    },
                    "status": {
                        "$ref": "#/components/schemas/PaymentConceptStatus"
                    },
                    "start_date": {
                        "description": "Fecha de inicio (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                    },
                    "end_date": {
                        "description": "Fecha de fin (opcional, YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-03-01"
                    },
                    "amount": {
                        "description": "Monto del concepto",
                        "type": "number",
                        "minimum": 10,
                        "example": 1500.5
                    },
                    "applies_to": {
                        "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                    },
                    "semestres": {
                        "description": "Array de semestres a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "careers": {
                        "description": "Array de IDs de carreras a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            4,
                            7
                        ]
                    },
                    "students": {
                        "description": "Array de numeros de control de estudiantes a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12",
                            "55",
                            "89"
                        ]
                    },
                    "exceptionStudents": {
                        "description": "Array de numeros de control de estudiantes a los que no aplica el concepto por alguna razón(opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "11",
                            "60",
                            "90"
                        ]
                    },
                    "applicantTags": {
                        "description": "Array de casos especiales para aplicar un concepto (opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "applicants"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptRelationsRequest": {
                "properties": {
                    "applies_to": {
                        "$ref": "#/components/schemas/PaymentConceptAppliesTo"
                    },
                    "semestres": {
                        "description": "Array de semestres a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "careers": {
                        "description": "Array de IDs de carreras a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            3,
                            5
                        ]
                    },
                    "students": {
                        "description": "Array de numeros de control de estudiantes a los que aplica (opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "21",
                            "22",
                            "23"
                        ]
                    },
                    "replaceRelations": {
                        "description": "Indica si se deben reemplazar las relaciones existentes",
                        "type": "boolean",
                        "example": true
                    },
                    "exceptionStudents": {
                        "description": "Array de numeros de control de estudiantes a los que no aplica el concepto por alguna razón(opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "11",
                            "60",
                            "90"
                        ]
                    },
                    "replaceExceptions": {
                        "description": "Indica si se deben reemplazar las relaciones de exceptions",
                        "type": "boolean",
                        "example": true
                    },
                    "removeAllExceptions": {
                        "description": "Indica si se deben eliminar todas las exceptions",
                        "type": "boolean",
                        "example": true
                    },
                    "applicantTags": {
                        "description": "Array de casos especiales para aplicar un concepto (opcional)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "applicants"
                        ]
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptRequest": {
                "properties": {
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "maxLength": 50,
                        "example": "Inscripción Semestral"
                    },
                    "description": {
                        "description": "Descripción opcional del concepto",
                        "type": "string",
                        "maxLength": 100,
                        "example": "Pago correspondiente al semestre agosto-diciembre"
                    },
                    "start_date": {
                        "description": "Fecha de inicio (YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                    },
                    "end_date": {
                        "description": "Fecha de fin (opcional, YYYY-MM-DD)",
                        "type": "string",
                        "format": "date",
                        "example": "2025-06-30"
                    },
                    "amount": {
                        "description": "Monto del concepto",
                        "type": "number",
                        "minimum": 10,
                        "example": 1800.5
                    }
                },
                "type": "object"
            },
            "ValidatePaymentRequest": {
                "properties": {
                    "search": {
                        "description": "Término de búsqueda para validar el pago",
                        "type": "string",
                        "example": "user@example.com"
                    },
                    "payment_intent_id": {
                        "description": "ID del intento de pago a validar",
                        "type": "string",
                        "example": "pi_1Hh1XYZ1234567890"
                    }
                },
                "type": "object"
            },
            "PayConceptRequest": {
                "properties": {
                    "concept_id": {
                        "description": "ID del concepto que se desea pagar",
                        "type": "integer",
                        "example": 123
                    }
                },
                "type": "object"
            },
            "UpdatePasswordRequest": {
                "properties": {
                    "currentPassword": {
                        "description": "Contraseña actual del usuario",
                        "type": "string",
                        "minLength": 8,
                        "example": "oldPassword123"
                    },
                    "newPassword": {
                        "description": "Nueva contraseña que el usuario desea establecer",
                        "type": "string",
                        "minLength": 8,
                        "example": "newPassword456"
                    }
                },
                "type": "object"
            },
            "UpdateUserRequest": {
                "properties": {
                    "name": {
                        "description": "Nombre del usuario",
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "description": "Apellido del usuario",
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario, debe ser único",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "phone_number": {
                        "description": "Número de teléfono del usuario",
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "birthdate": {
                        "description": "Fecha de nacimiento del usuario en formato AAAA-MM-DD",
                        "type": "string",
                        "format": "date",
                        "example": "1990-05-15"
                    },
                    "gender": {
                        "$ref": "#/components/schemas/UserGender"
                    },
                    "address": {
                        "description": "Dirección del usuario",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "blood_type": {
                        "$ref": "#/components/schemas/UserBloodType"
                    }
                },
                "type": "object"
            },
            "ConceptsListItem": {
                "description": "Item de concepto para listado",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "amount": {
                        "type": "string",
                        "example": "1,500.00"
                    },
                    "status": {
                        "type": "string",
                        "example": "active"
                    },
                    "applies_to": {
                        "type": "string",
                        "example": "todos"
                    },
                    "expiration_human": {
                        "description": "Texto humano que indica estado de expiración",
                        "type": "string",
                        "example": "Vence en 3 días",
                        "nullable": true
                    },
                    "days_until_deletion": {
                        "description": "Dias que faltan para ser eliminado",
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "has_expiration": {
                        "description": "Indica si el concepto tiene fecha de expiración",
                        "type": "boolean",
                        "example": true
                    },
                    "is_deleted": {
                        "description": "Indica si el concepto fue marcado como eliminado",
                        "type": "boolean",
                        "example": true
                    }
                },
                "type": "object"
            },
            "ErrorResponse": {
                "description": "Formato estándar de respuesta de error",
                "properties": {
                    "success": {
                        "description": "Indica que la operación falló",
                        "type": "boolean",
                        "example": false
                    },
                    "message": {
                        "description": "Mensaje de error principal",
                        "type": "string",
                        "example": "Error descriptivo para el usuario",
                        "nullable": true
                    },
                    "error_code": {
                        "description": "Código de error estandarizado para programática",
                        "type": "string",
                        "example": "VALIDATION_ERROR",
                        "nullable": true
                    },
                    "errors": {
                        "description": "Errores de validación detallados por campo (solo para errores 422)",
                        "type": "object",
                        "example": {
                            "email": [
                                "El campo email es requerido",
                                "El email debe ser válido"
                            ],
                            "password": [
                                "La contraseña debe tener al menos 8 caracteres"
                            ]
                        },
                        "nullable": true,
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "type": "object"
            },
            "StudentControlNumber": {
                "description": "Resultado de búsqueda de número de control",
                "properties": {
                    "id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 123
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "20230001"
                    },
                    "name": {
                        "description": "Nombre completo del estudiante",
                        "type": "string",
                        "example": "Juan Pérez López"
                    },
                    "text": {
                        "description": "Texto formateado para display",
                        "type": "string",
                        "example": "20230001 - Juan Pérez López"
                    }
                },
                "type": "object"
            },
            "SuccessResponse": {
                "description": "Formato estándar de respuesta exitosa",
                "properties": {
                    "success": {
                        "description": "Indica que la operación fue exitosa",
                        "type": "boolean",
                        "example": true
                    },
                    "message": {
                        "description": "Mensaje descriptivo opcional del resultado",
                        "type": "string",
                        "example": "Operación completada exitosamente",
                        "nullable": true
                    },
                    "data": {
                        "description": "Datos de respuesta (estructura variable según el endpoint)",
                        "nullable": true,
                        "oneOf": [
                            {
                                "type": "object"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "object"
                                }
                            },
                            {
                                "type": "string"
                            },
                            {
                                "type": "number"
                            },
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Admin",
            "description": "Endpoints para gestión administrativa (asignación e importación de usuarios)"
        },
        {
            "name": "Careers",
            "description": "Operaciones relacionadas con carreras"
        },
        {
            "name": "Auth",
            "description": "Endpoints relacionados con la autenticación de usuarios, tokens de acceso, contraseñas y verificación"
        },
        {
            "name": "Notifications",
            "description": "Endpoints para gestionar notificaciones de usuarios"
        },
        {
            "name": "Parents",
            "description": "Endpoints para invitar y aceptar padres de alumnos"
        },
        {
            "name": "Payment Concepts",
            "description": "Gestión de conceptos de pago en el sistema (creación, actualización, activación, eliminación, etc.)"
        },
        {
            "name": "Debts",
            "description": "Endpoints para la gestión y consulta de pagos pendinetes y validación de los mismos cuando haya un error de registro"
        },
        {
            "name": "Payments",
            "description": "Endpoints para la gestión y consulta de pagos registrados"
        },
        {
            "name": "Cards",
            "description": "Gestión de métodos de pago (tarjetas) asociados a los usuarios"
        },
        {
            "name": "Users",
            "description": "Operaciones para actualizar usuarios"
        },
        {
            "name": "Dashboard Staff",
            "description": "Dashboard Staff"
        },
        {
            "name": "Dashboard Student",
            "description": "Dashboard Student"
        },
        {
            "name": "Payment History",
            "description": "Payment History"
        },
        {
            "name": "Receipts",
            "description": "Receipts"
        },
        {
            "name": "Pending Payment",
            "description": "Pending Payment"
        }
    ]
}