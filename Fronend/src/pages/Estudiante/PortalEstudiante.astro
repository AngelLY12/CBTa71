---
import StudentLayout from '../layouts/LayoutEstu.astro';

// Datos para las tarjetas superiores (Basados en imagen_ce081b.png)
const stats = [
  { title: "Pagos Pendientes", amount: "S/ 1,336.00", detail: "1 concepto", icon: "clock", color: "border-gray-200" },
  { title: "Pagos Realizados", amount: "S/ 0.00", detail: "Este año académico", icon: "check", color: "border-gray-200" },
  { title: "Pagos Vencidos", amount: "1", detail: "Requiere atención", icon: "alert", color: "border-red-400 text-red-600" }
];

// Datos para la tabla (Basados en imagen_d80ba8.png)
const conceptos = [
  { nombre: 'HM', monto: 11.00, estado: 'ACTIVO', inicio: '---', fin: '---' },
  { nombre: 'HJ', monto: 100.00, estado: 'ACTIVO', inicio: '---', fin: '---' },
  { nombre: 'HJ', monto: 100.00, estado: 'ACTIVO', inicio: '---', fin: '---' },
  { nombre: 'gd', monto: 10.00, estado: 'FINALIZADO', inicio: '---', fin: '16/12/2025' },
];

const porcentajeAnual = 0; // Basado en imagen_ce081b.png
---

<StudentLayout title="Dashboard Estudiante">
  <div class="space-y-8">
    <div class="flex items-center gap-3 border-b pb-4">
      <div class="bg-emerald-100 p-2 rounded-lg text-emerald-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
      </div>
      <h2 class="text-2xl font-bold text-slate-800">Pedro Gonzalez Lopez</h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      {stats.map(stat => (
        <div class={`bg-white p-4 rounded-xl border-2 ${stat.color} shadow-sm`}>
          <div class="flex justify-between items-start">
            <span class="text-sm font-semibold text-slate-500">{stat.title}</span>
            <div class="opacity-40">
                {stat.icon === 'clock' && <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>}
                {stat.icon === 'check' && <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>}
                {stat.icon === 'alert' && <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>}
            </div>
          </div>
          <div class="mt-2">
            <div class="text-xl font-black">{stat.amount}</div>
            <div class="text-xs text-slate-400">{stat.detail}</div>
          </div>
        </div>
      ))}
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="bg-white border rounded-2xl p-6 flex flex-col justify-center">
        <h3 class="text-lg font-bold mb-6 flex items-center gap-2">
          <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/></svg>
          Resumen del Año Académico 2024
        </h3>
        <div class="space-y-4">
          <div class="flex justify-between items-center p-3 hover:bg-slate-50 rounded-lg transition-colors">
            <span class="text-slate-600 font-medium">Total pagado</span>
            <span class="font-bold text-slate-900">$0.00</span>
          </div>
          <div class="flex justify-between items-center p-3 hover:bg-slate-50 rounded-lg transition-colors">
            <span class="text-slate-600 font-medium">Total pendiente</span>
            <span class="font-bold text-slate-900">$1336.00</span>
          </div>
          <div class="flex justify-between items-center p-3 border-t font-bold">
            <span class="text-slate-600">Total año</span>
            <span class="text-slate-900">$0.00</span>
          </div>
        </div>
      </div>

      <div class="bg-white border rounded-2xl p-6 flex flex-col items-center">
        <h3 class="w-full text-left text-slate-500 font-bold mb-4 uppercase text-xs tracking-wider">Anual</h3>
        <div class="relative flex items-center justify-center">
          <svg class="w-48 h-48 transform -rotate-90">
            <circle cx="96" cy="96" r="80" stroke="currentColor" stroke-width="16" fill="transparent" class="text-slate-100" />
            <circle cx="96" cy="96" r="80" stroke="currentColor" stroke-width="16" fill="transparent" 
              stroke-dasharray="502" 
              stroke-dashoffset={502 - (502 * porcentajeAnual) / 100}
              class="text-emerald-500" stroke-linecap="round" 
            />
          </svg>
          <div class="absolute text-center">
            <span class="text-4xl font-black text-slate-800">{porcentajeAnual}%</span>
          </div>
        </div>
        <div class="mt-4 text-slate-900 font-bold">$0.00</div>
      </div>
    </div>

    <div class="mt-8">
        <h3 class="text-lg font-bold mb-4">Mis pagos</h3>
        <div class="overflow-x-auto border rounded-xl shadow-sm">
            <table class="w-full text-left border-collapse">
                <thead class="bg-slate-50">
                    <tr>
                        <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase">Concepto</th>
                        <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase">Monto</th>
                        <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase">Estado</th>
                        <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase">Fecha Fin</th>
                    </tr>
                </thead>
                <tbody class="divide-y">
                    {conceptos.map((item) => (
                        <tr class="hover:bg-slate-50/50">
                            <td class="px-6 py-4 font-bold text-slate-700">{item.nombre}</td>
                            <td class="px-6 py-4 text-slate-600 font-medium">${item.monto.toFixed(2)}</td>
                            <td class="px-6 py-4">
                                <span class={`px-3 py-1 rounded-lg text-[10px] font-black ${
                                    item.estado === 'ACTIVO' ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'
                                }`}>
                                    {item.estado}
                                </span>
                            </td>
                            <td class="px-6 py-4 text-slate-500">{item.fin}</td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    </div>
  </div>
</StudentLayout>