{
    "openapi": "3.0.0",
    "info": {
        "title": "School Management API",
        "description": "Documentación de la API para el sistema de gestión escolar",
        "contact": {
            "name": "Equipo de desarrollo CBTa71",
            "email": "soporte@cbta71.edu.mx"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:9000/api",
            "description": "Servidor local"
        },
        {
            "url": "https://nginx-production-728f.up.railway.app/api",
            "description": "Servidor de producción"
        }
    ],
    "paths": {
        "/api/v1/admin-actions/attach-student": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Asociar detalles de estudiante a un usuario existente",
                "description": "Permite asignar información académica (carrera, semestre, grupo, taller) a un usuario ya registrado.",
                "operationId": "attachStudentDetailToUser",
                "requestBody": {
                    "description": "Datos necesarios para asociar un detalle de estudiante al usuario.",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateStudentDetailDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario asociado correctamente a un detalle de estudiante.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "$ref": "#/components/schemas/DomainUser"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Se asociarón correctamente los datos al estudiante."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        },
                                        "errors": {
                                            "properties": {
                                                "user_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El campo user_id es obligatorio."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para realizar esta acción."
                    },
                    "404": {
                        "description": "Usuario o recurso no encontrado."
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/import": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Importar usuarios desde un archivo Excel",
                "description": "Permite subir un archivo Excel con los datos de los usuarios para registrarlos masivamente.",
                "operationId": "681466b5379337f44a10ff79de6c51fe",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "description": "Archivo Excel (.xlsx) con la información de los usuarios a importar",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuarios importados correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuarios importados correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/update-permissions": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Actualizar permisos a múltiples usuarios",
                "description": "Permite al administrador agregar o eliminar permisos a varios usuarios al mismo tiempo.\n     *     Se puede especificar una lista de correos electrónicos y los permisos que se añadirán o eliminarán.",
                "operationId": "updateManyUserPermissions",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "curps"
                                ],
                                "properties": {
                                    "curps": {
                                        "description": "Lista de CURP de los usuarios a los que se aplicarán los cambios",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "example": "TROY090304HMRPTA09"
                                        }
                                    },
                                    "permissionsToAdd": {
                                        "description": "Permisos que se agregarán a los usuarios",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "example": "view payments"
                                        }
                                    },
                                    "permissionsToRemove": {
                                        "description": "Permisos que se eliminarán de los usuarios",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "example": "delete card"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Permisos actualizados correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Permisos actualizados correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los datos enviados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "El campo emails es obligatorio."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado: el usuario autenticado no tiene permiso para ejecutar esta acción"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/admin-actions/users": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mostrar usuarios existentes",
                "description": "Permite al administrador ver a todos los usuarios registrados, junto con sus roles, permisos y detalles académicos (si aplica).",
                "operationId": "showAllUsers",
                "parameters": [
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de usuarios por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a mostrar",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuarios obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "users": {
                                                    "$ref": "#/components/schemas/PaginatedResponse"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuarios encontrados."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/find/concept/{id}": {
            "get": {
                "tags": [
                    "FindEntity"
                ],
                "summary": "Buscar concepto de pago por ID",
                "description": "Obtiene la información de un concepto de pago específico mediante su identificador.",
                "operationId": "b916b8cfed1a9f3c7ffdeaa1eac6a8ac",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto a buscar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto encontrado correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto encontrado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Concepto no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El concepto solicitado no existe."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No autorizado"
                    },
                    "500": {
                        "description": "Error inesperado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/find/payment/{id}": {
            "get": {
                "tags": [
                    "FindEntity"
                ],
                "summary": "Buscar pago por ID",
                "description": "Obtiene la información detallada de un pago específico mediante su identificador.",
                "operationId": "e17c318789b79b846f82d25d0d75c349",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del pago a buscar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pago encontrado correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payment": {
                                                    "$ref": "#/components/schemas/DomainPayment"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Pago encontrado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pago no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El pago solicitado no existe."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No autorizado"
                    },
                    "500": {
                        "description": "Error inesperado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/find/user": {
            "get": {
                "tags": [
                    "FindEntity"
                ],
                "summary": "Obtener usuario autenticado",
                "description": "Devuelve la información del usuario autenticado en el sistema.",
                "operationId": "ebfc31a0a1f630400906aec03096a4c6",
                "responses": {
                    "200": {
                        "description": "Usuario autenticado encontrado correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "$ref": "#/components/schemas/DomainUser"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario encontrado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el usuario autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado"
                    },
                    "403": {
                        "description": "No autorizado"
                    },
                    "500": {
                        "description": "Error inesperado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Registrar un nuevo usuario",
                "description": "Crea un nuevo usuario en el sistema con los datos proporcionados.",
                "operationId": "registerUser",
                "requestBody": {
                    "description": "Datos necesarios para el registro del usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateUserDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado con éxito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "user": {
                                                    "$ref": "#/components/schemas/DomainUser"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El usuario ha sido creado con éxito."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "errors": {
                                            "description": "Listado de errores de validación",
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "El campo email es obligatorio."
                                                ],
                                                "password": [
                                                    "El campo password debe tener al menos 6 caracteres."
                                                ]
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado en el servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Inicio de sesión de usuario",
                "description": "Autentica un usuario con su correo electrónico y contraseña, devolviendo el access token y refresh token.",
                "operationId": "loginUser",
                "requestBody": {
                    "description": "Credenciales del usuario para iniciar sesión",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "user_tokens": {
                                                    "$ref": "#/components/schemas/LoginResponse"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Inicio de sesión exitoso."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "errors": {
                                            "description": "Listado de errores de validación",
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "El campo email es obligatorio."
                                                ],
                                                "password": [
                                                    "El campo password es obligatorio."
                                                ]
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Credenciales incorrectas."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/refresh-token": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Refrescar token de acceso",
                "description": "Recibe un token de actualización (refresh token) y devuelve un nuevo token de acceso válido. Tambien rota el refresh token",
                "operationId": "ab3e1bb07b8ea9c9833f844ac34aaa4b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "refresh_token"
                                ],
                                "properties": {
                                    "refresh_token": {
                                        "type": "string",
                                        "example": "def50200fcdcb15b13e..."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tokens renovados con exito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "user_tokens": {
                                                    "$ref": "#/components/schemas/LoginResponse"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tokens renovados."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "errors": {
                                            "description": "Listado de errores de validación",
                                            "type": "object",
                                            "example": {
                                                "refresh_token": [
                                                    "El refresh token es obligatorio."
                                                ]
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Credenciales incorrectas."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Cerrar sesión",
                "description": "Cierra la sesión del usuario y revoca el refresh token proporcionado.",
                "operationId": "b34a466f3bcfb011074f4b2a8766152e",
                "parameters": [
                    {
                        "name": "x-refresh-token",
                        "in": "header",
                        "description": "Refresh token asociado a la sesión",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "def50200fcdcb15b13e..."
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Sesión cerrada exitosamente (sin contenido)"
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "errors": {
                                            "description": "Listado de errores de validación",
                                            "type": "object",
                                            "example": {
                                                "refresh_token": [
                                                    "El refresh token es es invalido o incorrecto."
                                                ]
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Credenciales incorrectas."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error inesperado del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts": {
            "get": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Listar conceptos de pago",
                "description": "Obtiene una lista paginada de conceptos de pago, con filtros opcionales por estado y control de caché.",
                "operationId": "f9d62ceeda29d557b295b481705f8256",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtra por estado (ej. 'activo', 'todos', etc)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "activo"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a obtener",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza actualización de caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de conceptos de pago obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concepts": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/DomainPaymentConcept"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Crear un nuevo concepto de pago",
                "description": "Crea un nuevo concepto de pago y lo asocia con las entidades correspondientes (carreras, semestres, estudiantes).",
                "operationId": "743f0533fc17f5c5ab407a7991420bb4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePaymentConceptDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Concepto de pago creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago creado con éxito."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en la validación de datos."
                                        },
                                        "errors": {
                                            "description": "Errores de validación por campo",
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Conflicto en los datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Recurso no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Recurso no encontrado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}": {
            "put": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Actualizar un concepto de pago",
                "description": "Actualiza los datos de un concepto de pago existente. Todos los campos son opcionales (usar 'sometimes'), excepto el id en la ruta.",
                "operationId": "5255c45ecbf80e25ad1524e85dbb6094",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del concepto de pago",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 5
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdatePaymentConceptDTO"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Concepto actualizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago actualizado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error en la validación de datos"
                    },
                    "409": {
                        "description": "Conflicto en los datos"
                    },
                    "404": {
                        "description": "Recurso no encontrado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Eliminar concepto de pago (físicamente)",
                "operationId": "a1ce3785ce0caf528b2a88675bdad7d1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto de pago eliminado correctamente"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}/finalize": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Finalizar concepto de pago",
                "operationId": "8a9c1d973d9719799f25e9f3123c4773",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto finalizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago finalizado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}/disable": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Deshabilitar un concepto de pago",
                "operationId": "6e47ae9f127401a1e2f21ed7288a2624",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto deshabilitado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago deshabilitado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}/activate": {
            "post": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Habilitar un concepto de pago",
                "operationId": "b3114aa4c8d7035e4022502021b2623c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Concepto activado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago habilitado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/concepts/{id}/logical": {
            "delete": {
                "tags": [
                    "Payment Concepts"
                ],
                "summary": "Eliminar concepto de pago (lógicamente)",
                "operationId": "7c483a4909f142379af6a8c31921454d",
                "responses": {
                    "200": {
                        "description": "Concepto eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concept": {
                                                    "$ref": "#/components/schemas/DomainPaymentConcept"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Concepto de pago eliminado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflicto en los datos"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/data": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener estadísticas generales del dashboard",
                "description": "Devuelve estadísticas generales como totales, montos y datos de rendimiento. Se puede filtrar por año actual y forzar actualización del caché.",
                "operationId": "a23679bacc898b8e8dd023f629a8ab44",
                "parameters": [
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Si es true, filtra los datos al año actual",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Datos del dashboard obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "statistics": {
                                                    "$ref": "#/components/schemas/DashboardDataResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado al obtener los datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/pending-payments": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener cantidad y monto total de pagos pendientes",
                "description": "Devuelve el total de conceptos pendientes de pago, incluyendo cantidad y monto total. Se puede filtrar por el año actual y forzar la actualización del caché.",
                "operationId": "626fb57370a4017884b788029222768e",
                "parameters": [
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Totales de pagos pendientes obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_pending": {
                                                    "$ref": "#/components/schemas/PendingSummaryResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error al obtener los pagos pendientes."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/students": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener el número total de estudiantes",
                "operationId": "0fed8bff97e80e0820aef055b4e9677c",
                "parameters": [
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Número total de estudiantes obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_students": {
                                                    "type": "integer",
                                                    "example": 1500
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error al obtener los pagos pendientes."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/payments-made": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener monto total de pagos realizados",
                "operationId": "a634e31096c9624601bd7b741c1d9004",
                "parameters": [
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Filtrar solo por el año actual",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Monto total de pagos realizados obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_earning": {
                                                    "type": "string",
                                                    "example": 325000
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error al obtener los pagos pendientes."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/concepts": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener todos los conceptos de pago",
                "description": "Devuelve una lista paginada de conceptos de pago visibles en el panel del personal. Permite filtrar por año actual y forzar actualización del caché.",
                "operationId": "95eef3a23564cc672ef466a0177e5c0a",
                "parameters": [
                    {
                        "name": "only_this_year",
                        "in": "query",
                        "description": "Si es true, filtra los conceptos al año actual",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página a obtener",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de conceptos obtenida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "concepts": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/ConceptsToDashboardResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard-staff/refresh": {
            "post": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Limpiar el caché del dashboard",
                "description": "Forza el borrado del caché en todos los datos del dashboard.",
                "operationId": "1986cc5e794aa644e1efe3001363cb2c",
                "responses": {
                    "200": {
                        "description": "Caché limpiado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Dashboard cache limpiado con éxito"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts": {
            "get": {
                "tags": [
                    "Debts"
                ],
                "summary": "Listar pagos pendientes",
                "description": "Obtiene una lista paginada de todos los pagos pendientes registrados. Permite buscar por nombre o control del estudiante, paginar los resultados y forzar la actualización del caché.",
                "operationId": "773aaeb3249ad9281a5db34d0fc35451",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Texto de búsqueda para filtrar por CURP, email o número de control del estudiante.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "example@gmail.com"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos pendientes obtenida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "pending_payments": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/ConceptNameAndAmountResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": null,
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts/validate": {
            "post": {
                "tags": [
                    "Debts"
                ],
                "summary": "Validar un pago de Stripe",
                "description": "Valida un pago realizado en Stripe mediante el `payment_intent_id` y la búsqueda del estudiante.",
                "operationId": "17c23f19ae55d836b49187e1a515784a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "search",
                                    "payment_intent_id"
                                ],
                                "properties": {
                                    "search": {
                                        "type": "string",
                                        "example": "LOYA030504HMSPXNA8"
                                    },
                                    "payment_intent_id": {
                                        "type": "string",
                                        "example": "pi_3Q3u9YBvLxeAQs9T1zUzr3YH"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pago validado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "validated_payment": {
                                                    "$ref": "#/components/schemas/PaymentValidateResponse"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Pago validado correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los datos enviados"
                    },
                    "409": {
                        "description": "Recurso no encontrado"
                    },
                    "500": {
                        "description": "Error de Stripe"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/debts/stripe-payments": {
            "get": {
                "tags": [
                    "Debts"
                ],
                "summary": "Obtener pagos desde Stripe",
                "description": "Obtiene todos los pagos registrados en Stripe asociados a un estudiante específico. Se puede filtrar por año y forzar actualización del caché.",
                "operationId": "2c87245d593a5a08c0a372b1f2a37040",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Stripe customer id del usuario",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "cu.."
                        }
                    },
                    {
                        "name": "year",
                        "in": "query",
                        "description": "Año específico de los pagos",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 2025
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos obtenidos correctamente desde Stripe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payments": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/StripePaymentsResponse"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Pagos obtenidos correctamente."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados"
                    },
                    "409": {
                        "description": "Recurso no encontrado"
                    },
                    "500": {
                        "description": "Error de Stripe"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/payments": {
            "get": {
                "tags": [
                    "Payments"
                ],
                "summary": "Obtener lista de pagos",
                "description": "Devuelve una lista paginada de pagos registrados, con opción de búsqueda por email, CURP o número de control, y posibilidad de forzar actualización del caché.",
                "operationId": "getPayments",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtro opcional para buscar por email, nombre o nombre de concepto de pago.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "example@gmail.com"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de resultados por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos obtenida exitosamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payments": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/PaymentListItemResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay pagos registrados.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados."
                    },
                    "409": {
                        "description": "Recurso no encontrado"
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/students": {
            "get": {
                "tags": [
                    "Students"
                ],
                "summary": "Obtener lista de alumnos",
                "description": "Devuelve una lista paginada de estudiantes registrados, con opción de búsqueda por email, CURP o número de control, y posibilidad de forzar actualización del caché.",
                "operationId": "getStudents",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtro opcional para buscar por email, CURP o número de control del estudiante.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "PERA020804MSHPNXA8"
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de resultados por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 10
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página actual (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de pagos obtenida exitosamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payments": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/UserWithPendingSumamaryResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay estudiantes registrados.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados."
                    },
                    "409": {
                        "description": "Recurso no encontrado"
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cards": {
            "get": {
                "tags": [
                    "Cards"
                ],
                "summary": "Listar métodos de pago del usuario autenticado",
                "description": "Obtiene la lista de tarjetas o métodos de pago asociados al usuario autenticado. Permite forzar actualización del caché.",
                "operationId": "getUserCards",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Si es true, fuerza la actualización del caché.",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de métodos de pago obtenida correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "cards": {
                                                    "description": "Lista de métodos de pago del usuario",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/DisplayPaymentMethodResponse"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontraron métodos de pago.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado - Token inválido o ausente"
                    },
                    "500": {
                        "description": "Error interno del servidor"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Cards"
                ],
                "summary": "Registrar un nuevo método de pago",
                "description": "Crea una sesión de Stripe Checkout para registrar una nueva tarjeta del usuario autenticado.",
                "operationId": "addUserCard",
                "responses": {
                    "201": {
                        "description": "Sesión de registro de método de pago creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "cards": {
                                                    "description": "Lista de métodos de pago del usuario",
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/SetupCardResponse"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/cards/{paymentMethodId}": {
            "delete": {
                "tags": [
                    "Cards"
                ],
                "summary": "Eliminar un método de pago",
                "description": "Elimina un método de pago específico asociado al usuario autenticado.",
                "operationId": "deleteUserCard",
                "parameters": [
                    {
                        "name": "paymentMethodId",
                        "in": "path",
                        "description": "ID del método de pago a eliminar (por ejemplo, 'pm_1P7E89AjcPzVqRkV')",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "pm_1P7E89AjcPzVqRkV"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Método de pago eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Método de pago eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Método de pago no encontrado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener estadísticas generales del dashboard del usuario",
                "description": "Devuelve información resumida de los conceptos, pagos y deudas del usuario autenticado.",
                "operationId": "getDashboardData",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Datos del dashboard obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "statistics": {
                                                    "$ref": "#/components/schemas/DashboardDataResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error inesperado al obtener los datos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/pending": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener total de pagos pendientes del usuario",
                "description": "Devuelve la cantidad y monto total de los pagos pendientes del usuario autenticado.",
                "operationId": "getPendingPayments",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Totales de pagos pendientes obtenidos correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "total_pending": {
                                                    "$ref": "#/components/schemas/PendingSummaryResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autenticado."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Ocurrió un error al obtener los pagos pendientes."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/paid": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener total de pagos realizados por el usuario",
                "description": "Devuelve el monto total de pagos completados por el usuario autenticado.",
                "operationId": "getPaidAmount",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Monto total de pagos realizados obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "paid": {
                                            "properties": {
                                                "total_paid": {
                                                    "type": "string",
                                                    "example": 3500
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/overdue": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener total de pagos vencidos del usuario",
                "description": "Devuelve el monto total de los pagos vencidos asociados al usuario autenticado.",
                "operationId": "getOverduePayments",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cantidad de pagos vencidos obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "overdue": {
                                            "properties": {
                                                "total_overdue": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/history": {
            "get": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Obtener historial de pagos del usuario autenticado",
                "description": "Devuelve una lista paginada con el historial de pagos realizados por el usuario autenticado. Permite forzar la actualización del caché.",
                "operationId": "getPaymentHistory",
                "parameters": [
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Número de registros por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización de caché (true o false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de pagos obtenido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payment_history": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/PaymentHistoryResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay pagos registrados en el historial",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado - Token inválido o ausente"
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados"
                    },
                    "500": {
                        "description": "Error interno del servidor"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/dashboard/refresh": {
            "post": {
                "tags": [
                    "Dashboard"
                ],
                "summary": "Limpiar caché del dashboard",
                "description": "Limpia el caché de datos almacenados en el dashboard (estadísticas, pagos, etc.)",
                "operationId": "refreshDashboardCache",
                "responses": {
                    "200": {
                        "description": "Caché del dashboard limpiado con éxito",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Dashboard cache limpiado con éxito"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/history": {
            "get": {
                "tags": [
                    "Payment History"
                ],
                "summary": "Obtener historial de pagos del usuario autenticado",
                "description": "Devuelve el historial de pagos del usuario logueado, con soporte para paginación y cacheo.",
                "operationId": "getUserPaymentHistory",
                "parameters": [
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Cantidad de registros por página (por defecto 15).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página (por defecto 1).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de pagos obtenido correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "payment_history": {
                                                    "allOf": [
                                                        {
                                                            "$ref": "#/components/schemas/PaginatedResponse"
                                                        },
                                                        {
                                                            "properties": {
                                                                "items": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "$ref": "#/components/schemas/PaymentDetailResponse"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay historial de pagos para este usuario.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado - Token inválido o ausente."
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados."
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pending-payments": {
            "get": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Obtener pagos pendientes del usuario autenticado",
                "description": "Devuelve todos los conceptos pendientes de pago del usuario logueado.",
                "operationId": "getUserPendingPayments",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true o false).",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos pendientes obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "pending_payments": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/PendingPaymentConceptsResponse"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay pagos pendientes para el usuario.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado - Token inválido o ausente."
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados."
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Generar intento de pago para un concepto pendiente",
                "description": "Crea un intento de pago en Stripe (u otro proveedor) para el concepto indicado y devuelve la URL del checkout.",
                "operationId": "createPaymentIntent",
                "requestBody": {
                    "description": "Datos necesarios para generar el intento de pago",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "concept_id"
                                ],
                                "properties": {
                                    "concept_id": {
                                        "description": "ID del concepto pendiente a pagar",
                                        "type": "integer",
                                        "example": 12
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Intento de pago generado correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "url_checkout": {
                                                    "type": "string",
                                                    "example": "https://checkout.stripe.com/pay/cs_test_a1b2c3d4e5"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "El intento de pago se generó con éxito."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No está permitido realizar esta acción."
                    },
                    "404": {
                        "description": "Recurso no encontrado."
                    },
                    "422": {
                        "description": "Error de validación en los datos enviados."
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/pending-payments/overdue": {
            "get": {
                "tags": [
                    "Pending Payment"
                ],
                "summary": "Obtener pagos vencidos del usuario autenticado",
                "description": "Devuelve los pagos que ya están vencidos para el usuario autenticado.",
                "operationId": "getUserOverduePayments",
                "parameters": [
                    {
                        "name": "forceRefresh",
                        "in": "query",
                        "description": "Forzar actualización del caché (true/false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pagos vencidos obtenidos correctamente.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "pending_payments": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/PendingPaymentConceptsResponse"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No hay pagos vencidos para el usuario.",
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado - Token inválido o ausente."
                    },
                    "422": {
                        "description": "Error de validación en los parámetros enviados."
                    },
                    "500": {
                        "description": "Error interno del servidor."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "LoginDTO": {
                "description": "Datos necesarios para iniciar sesión",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "usuario@example.com"
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "example": "secret123"
                    }
                },
                "type": "object"
            },
            "CreatePaymentConceptDTO": {
                "description": "Datos para crear un concepto de pago",
                "required": [
                    "concept_name",
                    "amount",
                    "status",
                    "is_global"
                ],
                "properties": {
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "status": {
                        "type": "string",
                        "example": "activo"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "is_global": {
                        "type": "boolean",
                        "example": true
                    },
                    "appliesTo": {
                        "type": "string",
                        "example": "todos"
                    },
                    "semesters": {
                        "description": "Semestres asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    },
                    "careers": {
                        "description": "Carreras asociadas al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ],
                        "nullable": true
                    },
                    "students": {
                        "description": "Numeros de control de estudiantes asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UpdatePaymentConceptDTO": {
                "description": "Datos para actualizar un concepto de pago",
                "required": [
                    "id",
                    "fieldsToUpdate"
                ],
                "properties": {
                    "id": {
                        "description": "ID del concepto a actualizar",
                        "type": "integer",
                        "example": 1
                    },
                    "fieldsToUpdate": {
                        "description": "Campos del concepto a actualizar con sus nuevos valores",
                        "type": "object",
                        "example": {
                            "concept_name": "Pago matrícula",
                            "amount": "2000.00",
                            "status": "activo"
                        }
                    },
                    "semesters": {
                        "description": "Semestres asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    },
                    "careers": {
                        "description": "Carreras asociadas al concepto",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ],
                        "nullable": true
                    },
                    "students": {
                        "description": "Numeros de control de estudiantes asociados al concepto",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "12345",
                            "67891"
                        ],
                        "nullable": true
                    },
                    "appliesTo": {
                        "description": "A quién aplica el concepto",
                        "type": "string",
                        "example": "todos",
                        "nullable": true
                    },
                    "replaceRelations": {
                        "description": "Si es true, reemplaza las relaciones existentes con las nuevas",
                        "type": "boolean",
                        "example": false
                    }
                },
                "type": "object"
            },
            "CreateStudentDetailDTO": {
                "description": "Datos para crear un detalle de estudiante",
                "properties": {
                    "user_id": {
                        "description": "ID del usuario asociado al detalle",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "career_id": {
                        "description": "ID de la carrera del estudiante",
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "integer",
                        "example": 123456,
                        "nullable": true
                    },
                    "semestre": {
                        "description": "Semestre actual del estudiante",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    },
                    "group": {
                        "description": "Grupo del estudiante",
                        "type": "string",
                        "example": "A",
                        "nullable": true
                    },
                    "workshop": {
                        "description": "Taller asignado al estudiante",
                        "type": "string",
                        "example": "Taller de matemáticas",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "CreateUserDTO": {
                "description": "Datos para crear un nuevo usuario",
                "required": [
                    "name",
                    "last_name",
                    "email",
                    "password",
                    "phone_number",
                    "curp"
                ],
                "properties": {
                    "name": {
                        "description": "Nombre del usuario",
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "description": "Apellido del usuario",
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "description": "Contraseña del usuario",
                        "type": "string",
                        "format": "password",
                        "example": "Password123!"
                    },
                    "phone_number": {
                        "description": "Número de teléfono",
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "birthdate": {
                        "description": "Fecha de nacimiento",
                        "type": "string",
                        "format": "date",
                        "example": "1995-04-23",
                        "nullable": true
                    },
                    "gender": {
                        "description": "Género del usuario",
                        "type": "string",
                        "example": "male",
                        "nullable": true
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "PEPJ950423HDFRRL09"
                    },
                    "address": {
                        "description": "Dirección del usuario",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "nullable": true
                    },
                    "blood_type": {
                        "description": "Tipo de sangre",
                        "type": "string",
                        "example": "O+",
                        "nullable": true
                    },
                    "registration_date": {
                        "description": "Fecha de registro",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-04T19:00:00Z",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del usuario",
                        "type": "string",
                        "example": "activo",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UpdateUserPermissionsDTO": {
                "properties": {
                    "curps": {
                        "description": "Lista de CURPs de los usuarios a actualizar",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "XAXX010101HNEXXXA",
                            "XEXX010101HNEXXXB"
                        ]
                    },
                    "permissionsToAdd": {
                        "description": "Lista de permisos a agregar a los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "find user",
                            "find concept"
                        ]
                    },
                    "permissionsToRemove": {
                        "description": "Lista de permisos a remover de los usuarios",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "delete payment"
                        ]
                    }
                },
                "type": "object"
            },
            "DashboardDataResponse": {
                "properties": {
                    "earnings": {
                        "description": "Ganancias totales",
                        "type": "string",
                        "example": "12500.50",
                        "nullable": true
                    },
                    "pending": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/PendingSummaryResponse"
                            }
                        ],
                        "nullable": true,
                        "description": "Resumen de pagos pendientes"
                    },
                    "students": {
                        "description": "Cantidad de estudiantes",
                        "type": "integer",
                        "example": 250,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DashboardDataUserResponse": {
                "properties": {
                    "completed": {
                        "description": "Monto completado",
                        "type": "string",
                        "example": "10500.00",
                        "nullable": true
                    },
                    "pending": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/PendingSummaryResponse"
                            }
                        ],
                        "nullable": true,
                        "description": "Resumen de pagos pendientes"
                    },
                    "overdue": {
                        "description": "Cantidad de pagos vencidos",
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "LoginResponse": {
                "properties": {
                    "access_token": {
                        "description": "Token de acceso JWT",
                        "type": "string",
                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                        "nullable": true
                    },
                    "refresh_token": {
                        "description": "Token para refrescar el access_token",
                        "type": "string",
                        "example": "dGhpcy1pcy1hLXJlZnJlc2gtdG9rZW4=",
                        "nullable": true
                    },
                    "token_type": {
                        "description": "Tipo de token, normalmente 'bearer'",
                        "type": "string",
                        "example": "bearer",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaginatedResponse": {
                "properties": {
                    "items": {
                        "description": "Lista de elementos paginados",
                        "type": "array",
                        "items": {
                            "type": "object"
                        },
                        "nullable": true
                    },
                    "currentPage": {
                        "type": "integer",
                        "example": 1
                    },
                    "lastPage": {
                        "type": "integer",
                        "example": 5
                    },
                    "perPage": {
                        "type": "integer",
                        "example": 15
                    },
                    "total": {
                        "type": "integer",
                        "example": 72
                    },
                    "hasMorePages": {
                        "type": "boolean",
                        "example": true
                    },
                    "nextPage": {
                        "type": "integer",
                        "example": 2
                    }
                },
                "type": "object"
            },
            "StripePaymentsResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago en Stripe",
                        "type": "string",
                        "example": "pay_01HXXXXXX",
                        "nullable": true
                    },
                    "payment_intent_id": {
                        "description": "ID del Payment Intent en Stripe",
                        "type": "string",
                        "example": "pi_01HXXXXXX",
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "succeeded",
                        "nullable": true
                    },
                    "amount_total": {
                        "description": "Monto total del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "created": {
                        "description": "Fecha de creación del pago en formato timestamp",
                        "type": "string",
                        "example": "2025-11-04T18:30:00Z",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentDataResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123,
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "completed",
                        "nullable": true
                    },
                    "payment_intent_id": {
                        "description": "ID del Payment Intent asociado",
                        "type": "string",
                        "example": "pi_01HXXXXXX",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentDetailResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123,
                        "nullable": true
                    },
                    "concept": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "date": {
                        "description": "Fecha del pago",
                        "type": "string",
                        "example": "2025-11-04",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del pago",
                        "type": "string",
                        "example": "completed",
                        "nullable": true
                    },
                    "reference": {
                        "description": "Referencia del pago",
                        "type": "string",
                        "example": "REF123456",
                        "nullable": true
                    },
                    "url": {
                        "description": "URL del recibo de pago",
                        "type": "string",
                        "example": "https://example.com/receipt/123",
                        "nullable": true
                    },
                    "payment_method_details": {
                        "description": "Detalles del método de pago utilizado",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentHistoryResponse": {
                "properties": {
                    "id": {
                        "description": "ID interno del pago",
                        "type": "integer",
                        "example": 123,
                        "nullable": true
                    },
                    "concept": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "date": {
                        "description": "Fecha del pago",
                        "type": "string",
                        "example": "2025-11-04",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentListItemResponse": {
                "properties": {
                    "date": {
                        "description": "Fecha del pago",
                        "type": "string",
                        "example": "2025-11-04",
                        "nullable": true
                    },
                    "concept": {
                        "description": "Concepto del pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "method": {
                        "description": "Método de pago usado",
                        "type": "string",
                        "example": "Tarjeta de crédito",
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario que realizó el pago",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PaymentValidateResponse": {
                "properties": {
                    "student": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/UserDataResponse"
                            }
                        ],
                        "nullable": true
                    },
                    "payment": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/PaymentDataResponse"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ConceptNameAndAmountResponse": {
                "properties": {
                    "user_name": {
                        "description": "Nombre del usuario asociado al pago",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "ConceptsToDashboardResponse": {
                "properties": {
                    "id": {
                        "description": "ID del concepto",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto de pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del concepto",
                        "type": "string",
                        "example": "activo",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del concepto",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "applies_to": {
                        "description": "A quién aplica el concepto",
                        "type": "string",
                        "example": "todos",
                        "nullable": true
                    },
                    "start_date": {
                        "description": "Fecha de inicio de validez",
                        "type": "string",
                        "format": "date",
                        "example": "2025-11-01",
                        "nullable": true
                    },
                    "end_date": {
                        "description": "Fecha de fin de validez",
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-01",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PendingPaymentConceptsResponse": {
                "properties": {
                    "id": {
                        "description": "ID del concepto pendiente",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "concept_name": {
                        "description": "Nombre del concepto pendiente",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "description": {
                        "description": "Descripción del concepto",
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025-2",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del concepto pendiente",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    },
                    "start_date": {
                        "description": "Fecha de inicio del concepto pendiente",
                        "type": "string",
                        "format": "date",
                        "example": "2025-11-01",
                        "nullable": true
                    },
                    "end_date": {
                        "description": "Fecha de finalización del concepto pendiente",
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-01",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "PendingSummaryResponse": {
                "properties": {
                    "totalAmount": {
                        "description": "Monto total pendiente",
                        "type": "string",
                        "example": "4500.00",
                        "nullable": true
                    },
                    "totalCount": {
                        "description": "Cantidad total de conceptos pendientes",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DisplayPaymentMethodResponse": {
                "properties": {
                    "id": {
                        "description": "ID del método de pago",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "brand": {
                        "description": "Marca de la tarjeta",
                        "type": "string",
                        "example": "Visa",
                        "nullable": true
                    },
                    "masked_card": {
                        "description": "Número de tarjeta enmascarado",
                        "type": "string",
                        "example": "**** **** **** 4242",
                        "nullable": true
                    },
                    "expiration_date": {
                        "description": "Fecha de expiración de la tarjeta",
                        "type": "string",
                        "example": "12/25",
                        "nullable": true
                    },
                    "status": {
                        "description": "Estado del método de pago",
                        "type": "string",
                        "example": "active",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "SetupCardResponse": {
                "properties": {
                    "id": {
                        "description": "ID de la configuración de la tarjeta",
                        "type": "string",
                        "example": "pm_01HXXXXXX",
                        "nullable": true
                    },
                    "url": {
                        "description": "URL para completar el setup de la tarjeta",
                        "type": "string",
                        "example": "https://example.com/setup/pm_01HXXXXXX",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserDataResponse": {
                "properties": {
                    "id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "email": {
                        "description": "Correo electrónico del usuario",
                        "type": "string",
                        "example": "juan.perez@example.com",
                        "nullable": true
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "PEPJ800101HDFRRN09",
                        "nullable": true
                    },
                    "n_control": {
                        "description": "Número de control del estudiante",
                        "type": "string",
                        "example": "2025001",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserIdListDTO": {
                "properties": {
                    "userIds": {
                        "description": "Lista de IDs de usuario",
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserRecipientDTO": {
                "properties": {
                    "id": {
                        "description": "ID del usuario destinatario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del destinatario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "email": {
                        "description": "Correo electrónico del destinatario",
                        "type": "string",
                        "example": "juan.perez@example.com",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithPaymentResponse": {
                "properties": {
                    "id": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "concept": {
                        "description": "Nombre del concepto asociado al pago",
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "description": "Monto del pago",
                        "type": "string",
                        "example": "1500.00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithPendingSumamaryResponse": {
                "properties": {
                    "userId": {
                        "description": "ID del usuario",
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez",
                        "nullable": true
                    },
                    "semestre": {
                        "description": "Semestre del estudiante",
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "career_name": {
                        "description": "Nombre de la carrera del estudiante",
                        "type": "string",
                        "example": "Ingeniería en Sistemas",
                        "nullable": true
                    },
                    "num_pending": {
                        "description": "Número de conceptos pendientes",
                        "type": "integer",
                        "example": 3,
                        "nullable": true
                    },
                    "total_amount_pending": {
                        "description": "Monto total pendiente",
                        "type": "string",
                        "example": "4500.00",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "UserWithUpdatedPermissionsResponse": {
                "properties": {
                    "fullName": {
                        "description": "Nombre completo del usuario",
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "curp": {
                        "description": "CURP del usuario",
                        "type": "string",
                        "example": "PEPJ800101HDFRRN09"
                    },
                    "updatedPermissions": {
                        "description": "Lista de permisos actualizados para el usuario",
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "find user",
                            "create payment"
                        ]
                    }
                },
                "type": "object"
            },
            "DomainCareer": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "career_name": {
                        "type": "string",
                        "example": "Matematicas"
                    }
                },
                "type": "object"
            },
            "DomainPayment": {
                "description": "Representa un pago realizado por un usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "payment_concept_id": {
                        "type": "integer",
                        "example": 45,
                        "nullable": true
                    },
                    "payment_method_id": {
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "stripe_payment_method_id": {
                        "type": "string",
                        "example": "pm_1Hh1Xx2eZvKYlo2Cj1234567",
                        "nullable": true
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción",
                        "nullable": true
                    },
                    "amount": {
                        "type": "number",
                        "format": "float",
                        "example": 1500,
                        "nullable": true
                    },
                    "payment_method_details": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Tarjeta de crédito",
                            "Banco XYZ"
                        ],
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "example": "pendiente"
                    },
                    "payment_intent_id": {
                        "type": "string",
                        "example": "pi_1Hh1Xx2eZvKYlo2Cd1234567",
                        "nullable": true
                    },
                    "url": {
                        "type": "string",
                        "example": "https://checkout.stripe.com/pay/cs_test_a1b2c3d4",
                        "nullable": true
                    },
                    "stripe_session_id": {
                        "type": "string",
                        "example": "cs_test_a1b2c3d4",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainPaymentConcept": {
                "description": "Representa un concepto de pago",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "concept_name": {
                        "type": "string",
                        "example": "Pago de inscripción"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pago correspondiente al semestre 2025A",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "example": "activo"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-09-01"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-12-31",
                        "nullable": true
                    },
                    "amount": {
                        "type": "string",
                        "example": "1500.00"
                    },
                    "applies_to": {
                        "type": "string",
                        "example": "todos"
                    },
                    "is_global": {
                        "type": "boolean",
                        "example": true
                    },
                    "userIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    },
                    "careerIds": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2
                        ]
                    },
                    "semesters": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "example": [
                            1,
                            2,
                            3
                        ]
                    }
                },
                "type": "object"
            },
            "DomainPaymentMethod": {
                "description": "Método de pago de un usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "stripe_payment_method_id": {
                        "type": "string",
                        "example": "pm_1Hh1Xx2eZvKYlo2Cj1234567"
                    },
                    "brand": {
                        "type": "string",
                        "example": "Visa",
                        "nullable": true
                    },
                    "last4": {
                        "type": "string",
                        "example": "4242",
                        "nullable": true
                    },
                    "exp_month": {
                        "type": "string",
                        "example": "12",
                        "nullable": true
                    },
                    "exp_year": {
                        "type": "string",
                        "example": "2027",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainRefreshToken": {
                "description": "Representa un token de actualización para un usuario",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "token": {
                        "type": "string",
                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-04T23:59:59Z"
                    },
                    "revoked": {
                        "type": "boolean",
                        "example": false
                    }
                },
                "type": "object"
            },
            "DomainStudentDetail": {
                "description": "Detalles del estudiante",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 123
                    },
                    "career_id": {
                        "type": "integer",
                        "example": 10,
                        "nullable": true
                    },
                    "n_control": {
                        "type": "integer",
                        "example": 20201234,
                        "nullable": true
                    },
                    "semestre": {
                        "type": "integer",
                        "example": 5,
                        "nullable": true
                    },
                    "group": {
                        "type": "string",
                        "example": "A",
                        "nullable": true
                    },
                    "workshop": {
                        "type": "string",
                        "example": "Taller de programación",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DomainUser": {
                "description": "Representa un usuario del sistema",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1,
                        "nullable": true
                    },
                    "name": {
                        "type": "string",
                        "example": "Juan"
                    },
                    "last_name": {
                        "type": "string",
                        "example": "Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan.perez@example.com"
                    },
                    "password": {
                        "type": "string",
                        "example": "hashed_password"
                    },
                    "phone_number": {
                        "type": "string",
                        "example": "+5215512345678"
                    },
                    "birthdate": {
                        "type": "string",
                        "format": "date",
                        "example": "1995-06-15",
                        "nullable": true
                    },
                    "gender": {
                        "type": "string",
                        "example": "male",
                        "nullable": true
                    },
                    "curp": {
                        "type": "string",
                        "example": "PEMJ950615HDFRZN09"
                    },
                    "address": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "Calle Falsa 123",
                            "Colonia Centro"
                        ],
                        "nullable": true
                    },
                    "stripe_customer_id": {
                        "type": "string",
                        "example": "cus_ABC123XYZ",
                        "nullable": true
                    },
                    "blood_type": {
                        "type": "string",
                        "example": "O+",
                        "nullable": true
                    },
                    "registration_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2024-01-15T12:34:56Z",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "example": "activo",
                        "nullable": true
                    },
                    "studentDetail": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/DomainStudentDetail"
                            }
                        ],
                        "nullable": true
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Admin",
            "description": "Endpoints para gestión administrativa (asignación e importación de usuarios)"
        },
        {
            "name": "FindEntity",
            "description": "Operaciones para buscar usuarios, pagos y conceptos"
        },
        {
            "name": "Auth",
            "description": "Endpoints de autenticación: renovación y cierre de sesión"
        },
        {
            "name": "Payment Concepts",
            "description": "Gestión de conceptos de pago en el sistema (creación, actualización, activación, eliminación, etc.)"
        },
        {
            "name": "Debts",
            "description": "Endpoints para la gestión y consulta de pagos pendinetes y validación de los mismos cuando haya un error de registro"
        },
        {
            "name": "Payments",
            "description": "Endpoints para la gestión y consulta de pagos registrados"
        },
        {
            "name": "Students",
            "description": "Endpoints para la gestión y consulta de estudiantes registrados"
        },
        {
            "name": "Cards",
            "description": "Gestión de métodos de pago (tarjetas) asociados a los usuarios"
        },
        {
            "name": "Dashboard",
            "description": "Endpoints relacionados con el panel de control del usuario (estadísticas, pagos y resumen financiero)"
        },
        {
            "name": "Payment History",
            "description": "Payment History"
        },
        {
            "name": "Pending Payment",
            "description": "Pending Payment"
        }
    ]
}